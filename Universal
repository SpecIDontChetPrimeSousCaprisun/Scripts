
	


WebsiteUrl = game:HttpGet("https://raw.githubusercontent.com/SpecIDontChetPrimeSousCaprisun/Scripts/refs/heads/main/Url.txt")

PLR = game:GetService("Players").LocalPlayer
Char = PLR.Character or PLR.CharacterAdded:Wait()
UIS = game:GetService("UserInputService")
TW = game:GetService("TweenService")
Key = Enum.KeyCode.H
BindingKey = nil
Cam = workspace.CurrentCamera
MouseBehavior = Enum.MouseBehavior.Default
MouseVisible = true
CustomCursor = false
HoverSound = Instance.new("Sound")
ClickSound = Instance.new("Sound")
VineBoom = Instance.new("Sound")

VineBoom.SoundId = "rbxassetid://5178876770"
VineBoom.Parent = game:GetService("SoundService")
HoverSound.Parent = game:GetService("SoundService")
HoverSound.SoundId = "rbxassetid://92876108656319"
ClickSound.Parent = game:GetService("SoundService")
ClickSound.SoundId = "rbxassetid://6042053626"

Tabs = {
	Home = {},
	Movement = {},
	Aimbot = {},
	Other = {},
	None = {}
}
CurrentTab = "None"

if getgenv().SXRunning == true then

	local MenuUI = Instance.new("ScreenGui")
	local ImgLabel = Instance.new("ImageLabel")

	ImgLabel.Size = UDim2.new(1,0,1,0)
	ImgLabel.Image = "http://www.roblox.com/asset/?id=75982668557119"
	ImgLabel.BackgroundTransparency = 1
	ImgLabel.Parent = MenuUI
	MenuUI.Parent = game:GetService("CoreGui").CaptureOverlay

	game.TweenService:Create(ImgLabel, TweenInfo.new(2.5, Enum.EasingStyle.Linear), {ImageTransparency = 1}):Play()
	VineBoom:Play()

	game:GetService("StarterGui"):SetCore("SendNotification", {
		Title = "Spheral-X",
		Text = "You aldready have an instance of Spheral-X running if you want to change versions then rejoin the game before injecting it again"
	})
	error("You aldready have an instance of Spheral-X running if you want to change versions then rejoin the game before injecting it again")

end 

game:GetService("StarterGui"):SetCore("SendNotification", {
	Title = "Spheral-X",
	Text = "SucessFully ran Spheral-X universal please wait..."
})

getgenv().SXRunning = true

--Download configs

local GameConfig
local Configs

getgenv().CurrentSXConfig = loadstring("return " ..game:HttpGet("https://raw.githubusercontent.com/SpecIDontChetPrimeSousCaprisun/Scripts/refs/heads/main/BaseConfig.luau"))()

pcall(function()
	
	Configs = game:HttpGet(string.gsub(WebsiteUrl.. "/SpheralX/Configs", "\n", ""))
	Configs = game:GetService("HttpService"):JSONDecode(Configs)

	if not Configs then

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "Couldn't download configs"
		})

	end

	--Game config
	GameConfig = game:HttpGet(string.gsub(WebsiteUrl.. "/SpheralX/GameConfigs/" ..game.GameId, "\n", ""))

	if GameConfig then

		if not game:GetService("HttpService"):JSONDecode(GameConfig).error then 

			GameConfig = game:GetService("HttpService"):JSONDecode(GameConfig)

			for ii, vv in getgenv().CurrentSXConfig do

				if not GameConfig[ii] then

					GameConfig[ii] = vv

				end

			end

			getgenv().CurrentSXConfig = GameConfig

		end

	end

	for i,v in Configs do

		for ii, vv in getgenv().CurrentSXConfig do

			if not v[ii] then

				v[ii] = vv

			end

		end

	end
	
end)

local OldPtpConnection
local OldWs

getgenv().CurrentSXConfig.CTPParams.FilterDescendantsInstances = {Char}
getgenv().CurrentSXConfig.CTPParams.RespectCanCollide = false
getgenv().CurrentSXConfig.CTPParams.IgnoreWater = true

getgenv().CurrentSXConfig.FlingTool.CanBeDropped = nil
getgenv().CurrentSXConfig.FlingTool.RequiresHandle = nil
getgenv().CurrentSXConfig.FlingTool.Name = "FlingTool"
getgenv().CurrentSXConfig.FlingTool.ToolTip = "A tool used to fling people. Have fun !!!"
getgenv().CurrentSXConfig.FlingToolParams = RaycastParams.new()
getgenv().CurrentSXConfig.FlingToolParams.FilterType = Enum.RaycastFilterType.Exclude
getgenv().CurrentSXConfig.FlingToolParamsWhitelist = {}

getgenv().CurrentSXConfig.ESPGui.ResetOnSpawn = nil
getgenv().CurrentSXConfig.ESPGui.Name = "EspGui"
getgenv().CurrentSXConfig.ESPGui.IgnoreGuiInset = true

getgenv().CurrentSXConfig.DeleteTool.RequiresHandle = false
getgenv().CurrentSXConfig.DeleteTool.Name = "DeleteTool"
getgenv().CurrentSXConfig.FlingTool.ToolTip = "Delete things ig"

function OffsetToScale(Offset)
	local ViewPortSize = workspace.Camera.ViewportSize
	return ({Offset[1] / ViewPortSize.X, Offset[2] / ViewPortSize.Y})
end

MenuUI = Instance.new("ScreenGui")
Cursor = Instance.new("ImageLabel", MenuUI)
AlwaysEnabled = Instance.new("ScreenGui")
MenuFrame = Instance.new("Frame", MenuUI)
MenuFrameDrag = Instance.new("UIDragDetector", MenuFrame)
MenuFrameCorner = Instance.new("UICorner", MenuFrame)
--MenuFrameRatio = Instance.new("UIAspectRatioConstraint")
MenuFrameGradient = Instance.new("UIGradient", MenuFrame)
MenuDragged = nil

RightSizeFrame = Instance.new("Frame", MenuUI)
RightSizeFrameDrag = Instance.new("UIDragDetector", RightSizeFrame)

MenuFrame.Size = UDim2.new(0.5,0,0.5,0)
MenuFrame.Position = UDim2.new(0.5,0,0.5,0)
MenuFrame.AnchorPoint  = Vector2.new(0.5,0.5)
MenuFrame.BackgroundTransparency = 0
MenuFrame.ClipsDescendants = true

MenuFrameGradient.Rotation = 45
MenuFrameGradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.fromRGB(0,0,0)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(1,13,42))
})
MenuFrameDrag.ResponseStyle = Enum.UIDragDetectorResponseStyle.Scale
MenuFrameDrag.BoundingUI = NameLabel
MenuFrameCorner.CornerRadius = UDim.new(0.05,0)
--MenuFrameRatio.AspectRatio = 2.03
--MenuFrameRatio.Parent = MenuFrame

RightSizeFrame.Transparency = 1
RightSizeFrame.AnchorPoint = Vector2.new(1, 0.5)
RightSizeFrame.Position = UDim2.fromScale(MenuFrame.Position.X.Scale + (MenuFrame.Size.X.Scale / 2), 0.5)
RightSizeFrame.Size = UDim2.fromScale(0.01, 1)
RightSizeFrameDrag.DragStyle = Enum.UIDragDetectorDragStyle.TranslateLine
RightSizeFrameDrag.DragAxis = Vector2.new(1, 0)
RightSizeFrameDrag.ResponseStyle = Enum.UIDragDetectorResponseStyle.Scale

LeftSizeFrame = RightSizeFrame:Clone()
LeftSizeFrameDrag = LeftSizeFrame.UIDragDetector
LeftSizeFrame.Parent = MenuUI
LeftSizeFrame.AnchorPoint = Vector2.new(0, 0.5)
LeftSizeFrame.Position = UDim2.fromScale(MenuFrame.Position.X.Scale - (MenuFrame.Size.X.Scale / 2), 0.5)

DownSizeFrame = RightSizeFrame:Clone()
DownSizeFrameDrag = DownSizeFrame.UIDragDetector
DownSizeFrameDrag.DragAxis = Vector2.new(0, 1)
DownSizeFrame.Parent = MenuUI
DownSizeFrame.AnchorPoint = Vector2.new(0.5, 0)
DownSizeFrame.Position = UDim2.fromScale(0.5, MenuFrame.Position.Y.Scale + (MenuFrame.Size.Y.Scale / 2))
DownSizeFrame.Size = UDim2.fromScale(1, 0.025)

UpSizeFrame = DownSizeFrame:Clone()
UpSizeFrame.UIDragDetector:Destroy()
UpSizeFrame.AnchorPoint = Vector2.new(0.5, 1)
UpSizeFrame.Position = UDim2.fromScale(0.5, MenuFrame.Position.Y.Scale - (MenuFrame.Size.Y.Scale / 2))
UpSizeFrame.Parent = MenuUI

VerUI = Instance.new("ScreenGui")
VerFrame = MenuFrame:Clone()
VerFrame.Parent = VerUI
VerFrame.UIDragDetector:Destroy()

NameLabel = Instance.new("TextLabel", MenuFrame)
ExitButton = Instance.new("TextButton", MenuFrame)
Options = Instance.new("Frame", MenuFrame)

NameLabelCorner = Instance.new("UICorner", NameLabel)
NameLabelShadow = Instance.new("Frame", MenuFrame)
NameLabelStroke = Instance.new("UIStroke", NameLabelShadow)

ExitButtonCorner = Instance.new("UICorner", ExitButton)
ExitButtonRatio = Instance.new("UIAspectRatioConstraint")

OptionsLayout = Instance.new("UIGridLayout", Options)

FlyFrame = Instance.new("Frame", Options)

FlyCorner = Instance.new("UICorner", FlyFrame)
FlyOptionLayout = Instance.new("UIListLayout", FlyFrame)

MenuUI.ResetOnSpawn = nil
MenuUI.Name = "GoatHub UNIVERSAL"
Cursor.Size = UDim2.fromScale(0.05, 0.05)
Cursor.AnchorPoint = Vector2.new(0,1)
Cursor.BackgroundTransparency = 1
Cursor.ZIndex = 2147483647
Instance.new("UIAspectRatioConstraint", Cursor)

AlwaysEnabled.Name = "GoatHub Always Enabled"

NameLabel.Name = "NameLabel"
NameLabel.Size = UDim2.new(1,0,0.1,0)
NameLabel.Position = UDim2.new(0,0,0,0)
NameLabel.BackgroundColor3 = Color3.fromRGB(2, 2, 2)
NameLabel.Text = "SX"
NameLabel.TextColor3 = Color3.new(1,1,1)
NameLabel.Font = Enum.Font.Michroma
NameLabel.TextXAlignment = Enum.TextXAlignment.Left
NameLabel.ZIndex = 5
NameLabel.TextScaled = true

NameLabelStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
NameLabelStroke.Color = Color3.new(0.75, 0.75, 0.75)
NameLabelStroke.Thickness = 2
NameLabelStroke.Enabled = nil
NameLabelCorner.CornerRadius = UDim.new(1,0)
NameLabelShadow.Name = "NameBackGround"
NameLabelShadow.BackgroundColor3 = NameLabel.BackgroundColor3
NameLabelShadow.Size = UDim2.new(1, 0,0.055, 0)
NameLabelShadow.Position = UDim2.new(0, 0,0.045, 0)

TabsFrame = Instance.new("ScrollingFrame", MenuFrame)
TabsFrameStroke = NameLabelStroke:Clone()
TabsUiLayout = Instance.new("UIListLayout", TabsFrame)
TabLabel = Instance.new("TextLabel", MenuUI)

ExitButton.Name = "ExitButton"
ExitButton.Size = UDim2.new(0.08, 0,0.08, 0)
ExitButton.Position = UDim2.new(0.937, 0,0.008, 0)
ExitButton.BackgroundColor3 = Color3.new(1,0,0)
ExitButton.Text = "X"
ExitButton.TextColor3 = Color3.new(1,1,1)
ExitButton.ZIndex = 99999

ExitButtonCorner.CornerRadius = UDim.new(1,0)
ExitButtonRatio.AspectRatio = 1
ExitButtonRatio.Parent = ExitButton

Options.Name = "Options"
Options.Position = UDim2.new(0.026,0,0.139,0)
Options.Size = UDim2.new(0.95, 0,0.783, 0)
Options.Transparency = 1

ChatArtFrame = MenuFrame:Clone()
ChatArtFrame.Name = "ChatArtEditor"
ChatArtFrame.Parent = MenuUI
ChatArtFrame.UIDragDetector:Destroy()
ChatArtFrame.Visible  = nil
ChatArtFrame.NameLabel.Text = "Chat art editor"
--ChatArtRatio = ChatArtFrame.UIAspectRatioConstraint

ChatArtEditFrame = ChatArtFrame.Options
ChatArtEditFrame.Name = "EditFrame"
ChatArtEditFrame.AnchorPoint = Vector2.new(0.25, 0.5)
ChatArtEditFrame.Position = UDim2.fromScale(0.25, 0.5)
ChatArtEditFrame.Frame:Destroy()
ChatArtEditFrameLayout = ChatArtEditFrame.UIGridLayout
ChatArtEditRatio = Instance.new("UIAspectRatioConstraint", ChatArtEditFrame)
Instance.new("UIAspectRatioConstraint", ChatArtEditFrameLayout)
ChatArtEditFrameLayout.CellSize = UDim2.fromScale(0.125, 0.125)
ChatArtEditFrameLayout.SortOrder = Enum.SortOrder.LayoutOrder

ChatArtButtonsFrame = Instance.new("Frame", ChatArtFrame)
ChatArtButtonsFrame.AnchorPoint = Vector2.new(1,1)
ChatArtButtonsFrame.Position = UDim2.new(1,0,1,0)
ChatArtButtonsFrame.Size = UDim2.new(0.2, 0, 0.78,1)
ChatArtButtonsFrame.BackgroundColor3 = Color3.fromRGB(45,45,45)

ChatArtButtonsFrameLayout = Instance.new("UIGridLayout", ChatArtButtonsFrame)
ChatArtButtonsFrameLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ChatArtButtonsFrameLayout.VerticalAlignment = Enum.VerticalAlignment.Top
ChatArtButtonsFrameLayout.SortOrder = Enum.SortOrder.LayoutOrder
ChatArtButtonsFrameLayout.FillDirection = Enum.FillDirection.Vertical
ChatArtButtonsFrameLayout.CellSize = UDim2.fromScale(0.25, 0.25)
Instance.new("UIAspectRatioConstraint", ChatArtButtonsFrameLayout)

ChatArtSendButton = Instance.new("TextButton", ChatArtFrame)
ChatArtSendButton.Text = "Send"
ChatArtSendButton.AnchorPoint = Vector2.new(0.5, 0.5)
ChatArtSendButton.Position = UDim2.fromScale(0.65, 0.8)
ChatArtSendButton.Size = UDim2.fromScale(0.1, 0.1)

OptionsLayout.CellSize = UDim2.new(0.25,0,1,0)
OptionsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
OptionsLayout.SortOrder = Enum.SortOrder.LayoutOrder

TabsFrame.AnchorPoint = Vector2.new(1,1)
TabsFrame.Position = UDim2.new(1,0,1,0)
TabsFrame.Size = UDim2.new(0.1, 0, 0.78,1)
TabsFrame.BackgroundColor3 = NameLabel.BackgroundColor3
TabsFrame.ScrollBarThickness = 0

TabsFrameStroke.Parent = TabsFrame
TabsFrameStroke.Enabled = true
TabsUiLayout.Padding = UDim.new(0.05)
TabsUiLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
TabsUiLayout.VerticalAlignment = Enum.VerticalAlignment.Top
TabsUiLayout.SortOrder = Enum.SortOrder.LayoutOrder
TabsUiLayout.FillDirection = Enum.FillDirection.Vertical
TabsUiLayout.Padding = UDim.new(0, 10)
TabLabel.TextXAlignment = Enum.TextXAlignment.Left
TabLabel.TextTransparency = 1
TabLabel.BackgroundTransparency = 1
TabLabel.TextColor3 = Color3.new(1, 1, 1)
TabLabel.Font = Enum.Font.FredokaOne
TabLabel.Text = "Tab"
TabLabel.Size = UDim2.fromScale(0.025, 0.025)
TabLabel.TextScaled = true

MenuFrameCorner:Clone().Parent = TabsFrame

VerBox = Instance.new("TextLabel", VerFrame)
SafeButton = Instance.new("TextButton", VerFrame)
SafeButtonCorner = Instance.new("UICorner", SafeButton)
SafeButtonStroke = Instance.new("UIStroke", SafeButton)

VerBox.BackgroundTransparency = 1
VerBox.Size = UDim2.fromScale(0.75, 0.5)
VerBox.Position = UDim2.fromScale(0.5, 0.34)
VerBox.Text = "Do you wish to launch the safe version or have more options like speed ?"
VerBox.Font = Enum.Font.FredokaOne
VerBox.TextScaled = true
VerBox.AnchorPoint = Vector2.new(0.5, 0.5)
VerBox.TextColor3 = Color3.new(1,1,1)

SafeButton.Position = UDim2.fromScale(0.25, 0.75)
SafeButton.Size = UDim2.fromScale(0.2, 0.1)
SafeButton.BackgroundColor3 = Color3.new(0,1,0)
SafeButton.Text = "Safe"
SafeButton.Font = Enum.Font.FredokaOne
SafeButton.TextColor3 = Color3.new(1,1,1)
SafeButton.AnchorPoint = Vector2.new(0.5, 0.5)
SafeButton.TextScaled = true
SafeButtonCorner.CornerRadius = UDim.new(1,0)
SafeButtonStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
SafeButtonStroke.Thickness = 3
SafeButtonStroke.Color = Color3.new(1,1,1)

NotSafeButton = SafeButton:Clone()

NotSafeButton.Position = UDim2.fromScale(0.75, 0.75)
NotSafeButton.Text = "More options"
NotSafeButton.BackgroundColor3 = Color3.new(1,0,0)
NotSafeButton.Font = Enum.Font.FredokaOne

NotSafeButton.Parent = VerFrame


VerUI.Parent = game:GetService("CoreGui").CaptureOverlay

Ansered = false
local Ver

SafeButton.MouseButton1Down:Once(function()

	Ver = "Safe"
	Ansered = true
	Cursor.BackgroundTransparency = 0

end)


NotSafeButton.MouseButton1Down:Once(function()

	Ver = "NotSafe"
	Ansered = true
	Cursor.Image = "rbxassetid://70823320771207"

end)

repeat wait() until Ansered

VerUI:Destroy()

if Ver == "Safe" then

	MenuUI.Parent = game:GetService("CoreGui").CaptureOverlay

else

	MenuUI.Parent = game:GetService("CoreGui")

end

MenuFrameDrag.DragStart:Connect(function()

	MenuDragged = true

end)

MenuFrameDrag.DragEnd:Connect(function()

	MenuDragged = nil

end)

AlwaysEnabled.Parent = MenuUI.Parent
getgenv().CurrentSXConfig.ESPGui.Parent = MenuUI.Parent

TWTL = TW:Create(TabLabel, TweenInfo.new(0.25, Enum.EasingStyle.Linear), {TextTransparency = 0})
TWTLR = TW:Create(TabLabel, TweenInfo.new(0.25, Enum.EasingStyle.Linear), {TextTransparency = 1})

function NewTab(Tab, LayoutOrder, Img)

	local Button = Instance.new("ImageButton", TabsFrame)
	local ButtonCorner = Instance.new("UICorner", Button)
	local ButtonConstraint = Instance.new("UIAspectRatioConstraint", Button)

	ButtonConstraint.DominantAxis = Enum.DominantAxis.Height
	Button.Name = Tab
	Button.Size = UDim2.new(0.5,0,0.5,0)

	if Ver ~= "Safe" then

		Button.Image = "rbxassetid://" ..Img

	end

	Button.BorderColor3 = Color3.fromRGB(70,70,70)
	Button.BackgroundTransparency = 0.75
	Button.LayoutOrder = LayoutOrder

	if Tab == CurrentTab then Button.BackgroundColor3 = Color3.new(1,0,0) end

	Button.MouseEnter:Connect(function()

		TabLabel.Size = UDim2.fromOffset(Button.AbsoluteSize.X * 5, Button.AbsoluteSize.Y)
		TabLabel.Text = Tab
		TabLabel.Position = UDim2.new(MenuFrame.Position.X.Scale + MenuFrame.Size.X.Scale / 2, 0, 0 ,Button.AbsolutePosition.Y)

		print(TabLabel.Position)

		if TabLabel.TextTransparency == 1 then

			TWTL:Play()

		else

			TWTLR:Cancel()
			TabLabel.TextTransparency = 0

		end

	end)

	Button.MouseLeave:Connect(function()

		TWTL:Cancel()
		TWTLR:Play()

	end)

	Button.MouseButton1Down:Connect(function()

		if CurrentTab == Tab then return end

		Button.BackgroundColor3 = Color3.new(1,0,0)
		TabsFrame[CurrentTab].BackgroundColor3 = Color3.fromRGB(70,70,70)

		for i,v in Tabs[CurrentTab] do

			v.Visible = nil

		end

		for i,v in Tabs[Tab] do

			v.Visible = true

		end

		CurrentTab = Tab

	end)

	return Button

end

NewTab("Home", 1, 109306454828475)

function NewButton(Name, Parent, Text, LayoutOrder, NoCheck, Checked)

	local Button = Instance.new("TextButton", Parent)
	local CheckFrame = Instance.new("CanvasGroup", Button)
	local GreenFrame = Instance.new("Frame", CheckFrame)
	local CheckStroke = Instance.new("UIStroke", CheckFrame)
	local CheckBorder = Instance.new("UICorner", CheckFrame)
	local Label = Instance.new("TextLabel", Button)

	Button.Name = Name
	Button.Size = UDim2.new(0.9, 0,0.075, 0)
	Button.BackgroundColor3 = Color3.fromRGB(15,15,15)
	Button.BackgroundTransparency = 0
	Button.BorderSizePixel = 0
	Button.LayoutOrder = LayoutOrder
	Button.Text = ""

	if NoCheck then

		CheckFrame:Destroy()
		Label.Position = UDim2.fromScale(0,0)
		Label.Size = UDim2.fromScale(1,1)

	else

		CheckFrame.Name = "Frame"
		CheckFrame.Size = UDim2.fromScale(1,1)
		CheckFrame.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
		CheckFrame.AnchorPoint = Vector2.new(1, 0)
		CheckFrame.Position = UDim2.fromScale(1, 0)
		CheckBorder.CornerRadius = UDim.new(0.2, 0)
		CheckBorder:Clone().Parent = GreenFrame
		CheckStroke.Thickness = 3
		GreenFrame.Visible = Checked
		GreenFrame.Size = UDim2.fromScale(1,1)
		GreenFrame.BackgroundColor3 = Color3.fromRGB(255, 162, 0)
		Label.Size = UDim2.fromScale(0.866,1)

	end

	Label.BackgroundTransparency = 1
	Label.TextColor3 = Color3.new(1,1,1)
	Label.TextScaled = true
	Label.Font = Enum.Font.FredokaOne
	Label.Text = Text
	Label.TextXAlignment = Enum.TextXAlignment.Left

	Instance.new("UIAspectRatioConstraint", CheckFrame)

	return Button

end

function NewBox(Name, Parent, Text, LayoutOrder)

	local Button = Instance.new("TextBox", Parent)

	Button.Name = Name
	Button.Size = UDim2.new(0.9, 0,0.1, 0)
	Button.BackgroundColor3 = Color3.fromRGB(45,45,45)
	Button.BackgroundTransparency = 0
	Button.BorderSizePixel = 0
	Button.TextColor3 = Color3.new(1,1,1)
	Button.TextScaled = true
	Button.Font = Enum.Font.FredokaOne
	Button.Text = Text
	Button.LayoutOrder = LayoutOrder
	Button.TextXAlignment = Enum.TextXAlignment.Left
	return Button

end

FlyFrame.Name = "Fly"
FlyFrame.BackgroundColor3 = Color3.fromRGB(5,5,5)
FlyFrame.LayoutOrder = 1
FlyFrame.Visible = nil

-- Creation d "Tabs"

NewTab("Movement", 2, 10507122420)
NewTab("Aimbot", 3, 13557340523)
NewTab("Fling", 4, 0)
NewTab("PartManipulation", 5, 0)
NewTab("Other", 9999, 0)

-- Frames

local LoadingFrame = Instance.new("CanvasGroup", NameLabel)
local LoadingBar = Instance.new("Frame", LoadingFrame)
local LoadingFrameCorner = Instance.new("UICorner", LoadingFrame)

LoadingFrameCorner.CornerRadius = UDim.new(1,0)

LoadingFrame.Name = "LoadingFrame"
LoadingFrame.AnchorPoint = Vector2.new(0.5,0.5)
LoadingFrame.Size = UDim2.new(0.75,0,0.25,0)
LoadingFrame.Position = UDim2.new(0.5,0,0.5,0)
LoadingFrame.BackgroundColor3 = Color3.new(1,1,1)
LoadingFrame.ZIndex = 10
LoadingBar.Size = UDim2.new(0,0,1,0)
LoadingBar.BackgroundColor3 = Color3.fromRGB(0,150,255)
LoadingBar.ZIndex = 20
LoadingFrameCorner:Clone().Parent = LoadingBar

FlyName = NameLabel:Clone()
FlyNameStroke = Instance.new("UIStroke", FlyName)
FlyNameStrokeGradient = Instance.new("UIGradient", FlyNameStroke)

FlyCorner.CornerRadius = UDim.new(0.1,0)
FlyOptionLayout.Padding = UDim.new(0.025)
FlyOptionLayout.SortOrder = Enum.SortOrder.LayoutOrder
FlyOptionLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
FlyName.LoadingFrame:Destroy()
FlyName.Parent = FlyFrame
FlyName.Text = "Fly"
FlyName.Name = "NameLabel"
FlyName.TextXAlignment = Enum.TextXAlignment.Center
FlyNameStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
FlyNameStroke.Color = Color3.fromRGB(255, 162, 0)
FlyNameStroke.Thickness = 3
FlyNameStrokeGradient.Rotation = 90
FlyNameStrokeGradient.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 1),
	NumberSequenceKeypoint.new(0.906, 1),
	NumberSequenceKeypoint.new(1, 0)
}

local WhitelistFrame = Instance.new("ScrollingFrame")
local WhitelistCorner = Instance.new("UICorner", WhitelistFrame)
local WhitelistOptionLayout = Instance.new("UIListLayout", WhitelistFrame)

WhitelistCorner.CornerRadius = UDim.new(0.1,0)
WhitelistOptionLayout.Padding = UDim.new(0.01)
WhitelistOptionLayout.SortOrder = Enum.SortOrder.LayoutOrder
WhitelistOptionLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
WhitelistFrame.Size = UDim2.new(0.1, 0,0.25, 0)
WhitelistFrame.Visible = nil
WhitelistFrame.Parent = MenuUI

FlingWhitelistFrame = WhitelistFrame:Clone()
FlingWhitelistFrame.Parent = MenuUI

InterfaceFrame = FlyFrame:Clone()
InterfaceFrame.Name = "Interface"
InterfaceFrame.NameLabel.Text = "Interface"
InterfaceFrame.LayoutOrder = 1
InterfaceFrame.Parent = Options

QOLFrame = FlyFrame:Clone()
QOLFrame.Name = "QOL"
QOLFrame.NameLabel.Text = "QOL"
QOLFrame.LayoutOrder = 2
QOLFrame.Parent = Options

ConfigsFrame = FlyFrame:Clone()
ConfigsFrame.Name = "Configs"
ConfigsFrame.NameLabel.Text = "Configs"
ConfigsFrame.LayoutOrder = 3
ConfigsFrame.Parent = Options

SpeedFrame = FlyFrame:Clone()
SpeedFrame.Name = "Speed"
SpeedFrame.NameLabel.Text = "Speed"
SpeedFrame.LayoutOrder = 2
SpeedFrame.Parent = Options

TPFrame = FlyFrame:Clone()
TPFrame.Name = "TP"
TPFrame.NameLabel.Text = "TP"
TPFrame.LayoutOrder = 3
TPFrame.Parent = Options

ESPFrame = FlyFrame:Clone()
ESPFrame.Name = "ESP"
ESPFrame.NameLabel.Text = "ESP"
ESPFrame.LayoutOrder = 1
ESPFrame.Parent = Options

AdvancedESP1 = FlyFrame:Clone()
AdvancedESP1.Name = "AdvancedESP1"
AdvancedESP1.NameLabel.Text = "UI"
AdvancedESP1.LayoutOrder = 1
AdvancedESP1.Parent = Options

AdvancedESP2 = FlyFrame:Clone()
AdvancedESP2.Name = "AdvancedESP1"
AdvancedESP2.NameLabel.Text = "Colors"
AdvancedESP2.LayoutOrder = 2
AdvancedESP2.Parent = Options

BangFrame = FlyFrame:Clone()
BangFrame.Name = "Bang"
BangFrame.NameLabel.Text = "Les 8 Ã©tapes"
BangFrame.LayoutOrder = 2
BangFrame.Parent = Options

ChatFrame = FlyFrame:Clone()
ChatFrame.Name = "Chat"
ChatFrame.NameLabel.Text = "Chat"
ChatFrame.LayoutOrder = 3
ChatFrame.Parent = Options

CLockFrame = FlyFrame:Clone()
CLockFrame.Name = "CLock"
CLockFrame.NameLabel.Text = "CLock"
CLockFrame.LayoutOrder = 1
CLockFrame.Parent = Options

AimbotFrame = FlyFrame:Clone()
AimbotFrame.Name = "Aimbot"
AimbotFrame.NameLabel.Text = "Aimbot"
AimbotFrame.LayoutOrder = 2
AimbotFrame.Parent = Options

CLockChecksFrame = FlyFrame:Clone()
CLockChecksFrame.Name = "CLockChecks"
CLockChecksFrame.NameLabel.Text = "Checks"
CLockChecksFrame.LayoutOrder = 3
CLockChecksFrame.Parent = Options

AdvancedFovFrame = FlyFrame:Clone()
AdvancedFovFrame.Name = "AdvancedFov"
AdvancedFovFrame.NameLabel.Text = "Fov"
AdvancedFovFrame.LayoutOrder = 1
AdvancedFovFrame.Parent = Options

TriggerBotFrame = FlyFrame:Clone()
TriggerBotFrame.Name = "Triggerbot"
TriggerBotFrame.NameLabel.Text = "Triggerbot"
TriggerBotFrame.LayoutOrder = 2
TriggerBotFrame.Parent = Options

FlingFrame = FlyFrame:Clone()
FlingFrame.Name = "FlingFrame"
FlingFrame.NameLabel.Text = "Fling"
FlingFrame.LayoutOrder = 1
FlingFrame.Parent = Options

FlingChecksFrame = FlyFrame:Clone()
FlingChecksFrame.Name = "FlingChecksFrame"
FlingChecksFrame.NameLabel.Text = "Fling Checks"
FlingChecksFrame.LayoutOrder = 2
FlingChecksFrame.Parent = Options

PartManipulationFrame = FlyFrame:Clone()
PartManipulationFrame.Name = "PartManipulationFrame"
PartManipulationFrame.NameLabel.Text = "Part Manipulation"
PartManipulationFrame.LayoutOrder = 1
PartManipulationFrame.Parent = Options

PartManipulationTypeFrame = FlyFrame:Clone()
PartManipulationTypeFrame.Name = "PartManipulationTypeFrame"
PartManipulationTypeFrame.NameLabel.Text = "Part Manipulation Type"
PartManipulationTypeFrame.LayoutOrder = 2
PartManipulationTypeFrame.Parent = Options

if game.GameId == 3808081382 then --Tsbite

	VoidDB = nil
	VoidTarget = getgenv().CurrentSXConfig.PlayerToTP
	VoidTool = getgenv().CurrentSXConfig.FlingTool:Clone()

	VoidTool.Name = "Void tool"
	VoidTool.ToolTip = "Used to void ppl"

	TrashcanTarget = getgenv().CurrentSXConfig.PlayerToTP
	Trashcaning = nil

	NewTab("Tsb", 9, 0)

	VoidFrame = FlyFrame:Clone()
	VoidFrame.Name = "Void"
	VoidFrame.NameLabel.Text = "Void"
	VoidFrame.LayoutOrder = 1
	VoidFrame.Parent = Options

	TrashcanFrame = FlyFrame:Clone()
	TrashcanFrame.Name = "Trascan"
	TrashcanFrame.NameLabel.Text = "Trashcan spamming"
	TrashcanFrame.LayoutOrder = 1
	TrashcanFrame.Parent = Options

	TsbTpFrame = FlyFrame:Clone()
	TsbTpFrame.Name = "Tps"
	TsbTpFrame.NameLabel.Text = "Cutsecenes tps"
	TsbTpFrame.LayoutOrder = 1
	TsbTpFrame.Parent = Options

	VoidButton = NewButton("Enabled", VoidFrame, "Void selected plr", 1, true)
	VoidTargetBox = NewBox("Target", VoidFrame, "Target = " ..VoidTarget.DisplayName, 2)
	VoidToolButton = NewButton("Tool", VoidFrame, "VoidToolGiver", 3, true)

	TrashcanFrame = FlyFrame:Clone()
	TrashcanFrame.Name = "Trascan"
	TrashcanFrame.NameLabel.Text = "Trashcan spamming"
	TrashcanFrame.LayoutOrder = 1
	TrashcanFrame.Parent = Options

	TrashcanButton = NewButton("Enabled", TrashcanFrame, "Spam selected plr", 1)
	TrashcanTargetBox = NewBox("Target", TrashcanFrame, "Target = " ..TrashcanTarget.DisplayName, 2)
	TrashcanToolButton = NewButton("Tool", TrashcanFrame, "TrashcanToolGiver", 3, true)

	Tabs.Tsb = {
		VoidFrame,
		TrashcanFrame,
		TsbTpFrame
	}

	function Void() -- Void

		if not PLR.Backpack:FindFirstChild("Flowing Water") then return end
		if VoidDB then return end 

		VoidDB = true

		local Start = tick()
		local Attack = PLR.Backpack["Flowing Water"]

		local OldPos = Char.HumanoidRootPart.CFrame

		Attack.Parent = Char
		Attack:Activate()

		while tick() - Start < 1 do

			task.wait()

			Char.HumanoidRootPart.CFrame = VoidTarget.Character:GetPivot() * CFrame.new(0,0,Char.HumanoidRootPart.Size.Z)

		end

		local TWV = TW:Create(Char.HumanoidRootPart, TweenInfo.new(0.25), {["CFrame"] = CFrame.new(Char.HumanoidRootPart.Position.X, 216.95181274414062, Char.HumanoidRootPart.Position.Z)}) 

		TWV:Play()
		TWV.Completed:Wait()

		local VoidConnection = game:GetService("RunService").RenderStepped:Connect(function()

			Char.HumanoidRootPart.CFrame = CFrame.new(Char.HumanoidRootPart.Position.X, 216.95181274414062, Char.HumanoidRootPart.Position.Z)

		end)

		task.delay(5, function()

			if Attack.Parent ~= PLR.Backpack then

				VoidConnection:Disconnect()

				Attack.Parent = PLR.Backpack
				Char.HumanoidRootPart.Anchored = nil
				Char.HumanoidRootPart.CFrame = OldPos

				VoidDB = nil

				return

			end

		end)

		VoidTarget.Character.Destroying:Wait()

		VoidConnection:Disconnect()

		Attack.Parent = PLR.Backpack
		Char.HumanoidRootPart.Anchored = nil
		Char.HumanoidRootPart.CFrame = OldPos

		VoidDB = nil

	end

	VoidButton.MouseButton1Down:Connect(Void)

	game:GetService("Players").PlayerRemoving:Connect(function(plr)

		if plr == VoidTarget then

			game:GetService("StarterGui"):SetCore("SendNotification", {
				Title = "Spheral-X",
				Text = "The targeted player of your void (" ..VoidTarget.DisplayName.. ") has left changed target to you."
			})

			VoidTarget = game:GetService("Players"):GetPlayers()[1]
			VoidTargetBox.Text = "Player = " ..VoidTarget.DisplayName

		end

	end)

	VoidTargetBox.FocusLost:Connect(function(EP)

		if not EP then return end

		local PlayerName = VoidTargetBox.Text
		local PLayer

		for i,v in game:GetService("Players"):GetPlayers() do

			if PLayer then continue end

			if string.find(string.lower(v.DisplayName), string.lower(PlayerName)) then

				PLayer = v
				VoidTarget = v

			end

		end

		VoidTargetBox.Text = "Player = " ..VoidTarget.DisplayName

	end)

	VoidToolButton.MouseButton1Down:Connect(function()

		local Tool = VoidTool:Clone()

		Tool.Parent = PLR.Backpack

		Tool.Activated:Connect(function()

			local MP = UIS:GetMouseLocation()
			local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
			local Result = workspace:Raycast(MR.Origin, MR.Direction * 100000, getgenv().CurrentSXConfig.FlingToolParams)

			if Result then

				if not Result.Instance:GetRootPart() then return end
				if not Result.Instance:GetRootPart().Parent then return end

				local plr = game:GetService("Players"):GetPlayerFromCharacter(Result.Instance:GetRootPart().Parent)

				if not plr then return end

				VoidTarget = plr
				VoidTargetBox.Text = "Player = " ..VoidTarget.DisplayName
				Void()

			end

		end)

	end)

	--TrashCan

	print(PLR.Character.HumanoidRootPart.RootJoint.C1.Rotation)

	local function Trashcan()

		Trashcaning = not Trashcaning

		TrashcanButton.Frame.Frame.Visible = Trashcaning

		if not Trashcaning then return end

		local BaseC1 = PLR.Character.HumanoidRootPart.RootJoint.C1

		--PLR.Character.HumanoidRootPart.RootJoint.C1 += Vector3.new(0, -50 , 0)

		while Trashcaning do

			Cam.CameraSubject = TrashcanTarget.Character.Humanoid

			local Found

			task.wait()

			for i,v in workspace.Map.Trash:GetChildren() do

				if Found then continue end

				if not v:GetAttribute("Broken") then

					Found = true

					PLR.Character.HumanoidRootPart.CFrame = v.Trashcan.CFrame + Vector3.new(0, 0, 2)

					PLR.Character:FindFirstChild("Communicate"):FireServer({
						Goal = "LeftClick";
					})

					local OnChildAdded
					local IDK

					OnChildAdded = PLR.Character.ChildAdded:Connect(function(Child)

						if not Child:IsA("StringValue") then return end
						if Child.Value ~= "Trashcan" then return end

						PLR.Character:FindFirstChild("Communicate"):FireServer({
							Goal = "LeftClickRelease";
						})

						Child.Destroying:Wait()

						task.wait(0.5)

						PLR.Character.HumanoidRootPart.CFrame = CFrame.lookAt(TrashcanTarget.Character.HumanoidRootPart.Position + Vector3.new(0, 0, 10), TrashcanTarget.Character.HumanoidRootPart.Position)

						PLR.Character:FindFirstChild("Communicate"):FireServer({
							Goal = "LeftClick";
						})

						IDK = true

					end)

					while not IDK do

						task.wait()

						PLR.Character.HumanoidRootPart.CFrame = v.Trashcan.CFrame + Vector3.new(0, 0, 2)

					end

					OnChildAdded:Disconnect()

					IDK = nil

					PLR.Character.ChildAdded:Connect(function(Child)

						if not Child:IsA("StringValue") then return end
						if Child.Value ~= "Trashcan" then return end

						PLR.Character:FindFirstChild("Communicate"):FireServer({
							Goal = "LeftClickRelease";
						})

						task.wait(0.75)

						IDK = true

					end)

					task.delay(2, function()

						if not IDK then

							IDK = true

						end

					end)

					while not IDK do

						task.wait()

						PLR.Character.HumanoidRootPart.CFrame = CFrame.lookAt((TrashcanTarget.Character.HumanoidRootPart.Position + (TrashcanTarget.Character.HumanoidRootPart.AssemblyLinearVelocity * 0.5)) + Vector3.new(0, 0, 10), TrashcanTarget.Character.HumanoidRootPart.Position)

					end

				end

			end

		end

		PLR.Character.HumanoidRootPart.RootJoint.C1 = BaseC1
		Cam.CameraSubject = PLR.Character.Humanoid

	end

	TrashcanButton.MouseButton1Down:Connect(Trashcan)

	game:GetService("Players").PlayerRemoving:Connect(function(plr)

		if plr == TrashcanTarget then

			game:GetService("StarterGui"):SetCore("SendNotification", {
				Title = "Spheral-X",
				Text = "The targeted player of your void (" ..TrashcanTarget.DisplayName.. ") has left changed target to you."
			})

			TrashcanTarget = game:GetService("Players"):GetPlayers()[1]
			TrashcanTargetBox.Text = "Player = " ..TrashcanTarget.DisplayName

		end

	end)

	TrashcanTargetBox.FocusLost:Connect(function(EP)

		if not EP then return end

		local PlayerName = TrashcanTargetBox.Text
		local PLayer

		for i,v in game:GetService("Players"):GetPlayers() do

			if PLayer then continue end

			if string.find(string.lower(v.DisplayName), string.lower(PlayerName)) then

				PLayer = v
				TrashcanTarget = v

			end

		end

		TrashcanTargetBox.Text = "Player = " ..TrashcanTarget.DisplayName

	end)

	-- Tps

	DeathCounterButton = NewButton("Enabled", TsbTpFrame, "Death counter", 1, true)
	AtomsButton = NewButton("Enabled", TsbTpFrame, "Atoms", 2, true)
	
	DeathCounterButton.MouseButton1Down:Connect(function()
		
		Char:PivotTo(workspace.Cutscenes["Death Cutscene"]:GetPivot())
		
	end)
	
	AtomsButton.MouseButton1Down:Connect(function()
		
		Char:PivotTo(workspace.Cutscenes.Atoms:GetPivot())
		
	end)

elseif game.GameId == 7828766934 then --Anime girl thingie

	NewTab("Steal", 9, 0)

	StealTarget = 1
	InstantSteal = true
	InfStealReach = true
	StealNoClip = true
	Focused = nil

	StealFrame = FlyFrame:Clone()
	StealFrame.Name = "Steal"
	StealFrame.NameLabel.Text = "Steal"
	StealFrame.LayoutOrder = 1
	StealFrame.Parent = Options

	for i,v in workspace.PLOTS:GetChildren() do

		if not v:FindFirstChild("Owner") then continue end

		StealTarget = v.Name

	end

	local StealButton = NewButton("Enabled", StealFrame, "Steal selected plr", 1, true)
	local StealTargetBox = NewBox("Enabled", StealFrame, "Steal target : " ..workspace.PLOTS[StealTarget].Owner.Value.DisplayName, 2)
	local InstantStealButton = NewButton("Enabled", StealFrame, "Instant steal", 3)
	local InfStealReachButton = NewButton("Enabled", StealFrame, "Inf steal reach", 4)
	local StealNoClipButton = NewButton("Enabled", StealFrame, "Steal trough walls", 5)

	Tabs.Steal = {StealFrame}

	local function Steal()

		print(StealTarget)

		for i,v in workspace.PLOTS[StealTarget]:GetChildren() do

			print(v)

			if not v:IsA("Model") then continue end

			print("a")

			if not v:FindFirstChild("GrabPrompt") then continue end

			print("b")

			if InstantSteal then

				v.GrabPrompt.HoldDuration = 0

			end

			if InfStealReach then

				v.GrabPrompt.MaxActivationDistance = 99999999999

			end

			if StealNoClip then

				v.GrabPrompt.RequiresLineOfSight = nil

			end

		end

	end

	StealButton.MouseButton1Down:Connect(function()

		Steal()

	end)

	StealTargetBox.FocusLost:Connect(function()

		Focused = nil

		for i,v in workspace.PLOTS:GetChildren() do

			if not v:FindFirstChild("Owner") then continue end

			if string.find(v.Owner.Value.DisplayName, StealTargetBox.Text) then

				StealTarget = v.Name

			end

		end

	end)

	InstantStealButton.MouseButton1Down:Connect(function()

		InstantSteal = not InstantSteal
		InstantStealButton.Frame.Frame.Visible = InstantSteal

	end)

	InfStealReachButton.MouseButton1Down:Connect(function()

		InfStealReach = not InfStealReach
		InfStealReachButton.Frame.Frame.Visible = InfStealReach

	end)

	StealNoClipButton.MouseButton1Down:Connect(function()

		StealNoClip = not StealNoClip
		StealNoClipButton.Frame.Frame.Visible = StealNoClip

	end)

	InstantStealButton.Frame.Frame.Visible = InstantSteal
	InfStealReachButton.Frame.Frame.Visible = InfStealReach
	StealNoClipButton.Frame.Frame.Visible = StealNoClip

	StealTargetBox.Focused:Connect(function()

		Focused = true

	end)

	game["Run Service"].RenderStepped:Connect(function()

		if Focused then return end

		StealTargetBox.Text = "Steal target : " ..workspace.PLOTS[StealTarget].Owner.Value.DisplayName

	end)

end

-- Home

local InterfaceKeybindButton = NewButton("Kebind", InterfaceFrame, "Keybind = H", 1, true)
local InterfaceSizeButton = NewButton("Size", InterfaceFrame, "Size = Medium", 2, true)
local SizeFrame = FlyFrame:Clone()
SizeFrame.Name = "Size"
SizeFrame.NameLabel.Text = "Choose size"
SizeFrame.LayoutOrder = 1
SizeFrame.Parent = MenuUI
SizeFrame.Size = UDim2.new(0.1, 0,0.25, 0)
InterfaceSizeButton.Visible = nil

local SmallButton = NewButton("Small", SizeFrame, "Small", 1, true)
local MediumButton = NewButton("Medium", SizeFrame, "Medium", 2, true)
local BigButton = NewButton("Big", SizeFrame, "Big", 3, true)
local Size2Button = NewButton("Size2", SizeFrame, "Size 2 Fish", 4, true)

local BTypeFrame = FlyFrame:Clone()
BTypeFrame.Name = "BType"
BTypeFrame.NameLabel.Text = "Choose type"
BTypeFrame.LayoutOrder = 1
BTypeFrame.Parent = MenuUI
BTypeFrame.Size = UDim2.new(0.1, 0,0.25, 0)

local Back = NewButton("Back", BTypeFrame, "Back", 1, true)
local Front = NewButton("Front", BTypeFrame, "Front", 2, true)
local Mouth = NewButton("Mouth", BTypeFrame, "Mouth", 3, true)

local KOCheckButton = NewButton("KO", CLockChecksFrame, "KO", 2, false, getgenv().CurrentSXConfig.KOCheck)
local WallCheckButton = NewButton("Wall", CLockChecksFrame, "Wall", 3, false, getgenv().CurrentSXConfig.WallCheck)
local TeamCheckButton = NewButton("Team", CLockChecksFrame, "Team", 4, false, getgenv().CurrentSXConfig.TeamCheck)

local KeybindsToggleButton = NewButton("KeybindsToggle", QOLFrame, "Keybinds", 1, false, getgenv().CurrentSXConfig.KeybindsActive)
local WhitelistButton = NewButton("Whitelist", QOLFrame, "Whitelist", 2, true)
local MouseBehaviorButton = NewButton("Mouse", QOLFrame, "Mouse behavior = Free mouse", 3, true)
local MouseVisibleButton = NewButton("Mouse", QOLFrame, "Mouse visible", 4, false, getgenv().CurrentSXConfig.MouseVisible)
local CustomCursorButton = NewButton("Cursor", QOLFrame, "Custom cursor", 5, false, getgenv().CurrentSXConfig.CustomCursor)

SaveConfigsButton = NewButton("Config", ConfigsFrame, "Save current config", 1, true)
LoadConfigsButton = NewButton("Config", ConfigsFrame, "Load configs", 2, true)
ConfigNameBox = NewBox("Config", ConfigsFrame, "", 3)
ConfigNameBox.PlaceholderText = "Config name here"

WhitelistButton.Visible = nil

Tabs.Home = {
	InterfaceFrame,
	QOLFrame,
	ConfigsFrame
}

-- Premier "Tab"

FlyEnabledButton = NewButton("Enabled", FlyFrame, "Fly", 1, false, getgenv().CurrentSXConfig.FlyEnabled)
local FlyKeybindButton = NewButton("Keybind", FlyFrame, "Keybind = F", 2, true)
local FlySpeedBox = NewBox("Speed", FlyFrame, "Speed = " ..getgenv().CurrentSXConfig.FlySpeed, 3)
local InfJumpEnabledButton = NewButton("Enabled", FlyFrame, "Inf jump", 6, false, getgenv().CurrentSXConfig.InfJumpEnabled)
local InfJumpKeybindButton = NewButton("Keybind", FlyFrame, "Keybind = M", 7, true)

local SpeedEnabledButton = NewButton("Enabled", SpeedFrame, "Enabled", 1, false, getgenv().CurrentSXConfig.SpeedEnabled)
local SpeedKeybindButton = NewButton("Keybind", SpeedFrame, "Keybind = G", 2, true)
local SpeedSpeedBox = NewBox("Speed", SpeedFrame, "Speed = " ..getgenv().CurrentSXConfig.SpeedSpeed, 3)

local CTPEnabledButton = NewButton("Enabled", TPFrame, "Click to tp", 2, false, getgenv().CurrentSXConfig.CTPEnabled)
local CTPKeybindButton = NewButton("Keybind", TPFrame, "Keybind = P", 3, true)

local PTPEnabledButton = NewButton("Enabled", TPFrame, "Teleport to selected plr", 5, true)
local PTPKeybindButton = NewButton("Keybind", TPFrame, "Keybind = L", 6, true)
local PTPPlayerBox = NewBox("Player", TPFrame, "Player = " ..getgenv().CurrentSXConfig.PlayerToTP.DisplayName, 7)

Tabs.Movement = {
	FlyFrame,
	SpeedFrame,
	TPFrame
}

-- Aimbot

local CLockEnabledButton = NewButton("Enabled", CLockFrame, "CLock", 1, false, getgenv().CurrentSXConfig.CLockEnabled)
local CLockKeybindButton = NewButton("Keybind", CLockFrame, "Keybind = none", 2, true)
local CLockFovEnableButton = NewButton("Fov", CLockChecksFrame, "Fov", 4, false, getgenv().CurrentSXConfig.CLockFovEnabled)
AdvancedFovButton = NewButton("AdvancedOptions", CLockChecksFrame, "Advanced options", 5, true)

CLockFovSizeBox = NewBox("Checks", AdvancedFovFrame, "Fov size = 100", 1)
CLockFovVisibleButton = NewButton("FovVisible", AdvancedFovFrame, "Fov visible", 2, false, getgenv().CurrentSXConfig.CLockFovEnabled)
FovRainbowButton = NewButton("Rainbow", AdvancedFovFrame, "LGBTQ+", 3, false, getgenv().CurrentSXConfig.FovRainbowEnabled)

FovFrame = Instance.new("Frame", AlwaysEnabled)
FovFrameCorner = Instance.new("UICorner", FovFrame)
FovFrameBorder = Instance.new("UIStroke", FovFrame)

FovFrame.BackgroundTransparency = 1
FovFrameCorner.CornerRadius = UDim.new(1,0)
FovFrame.Visible = nil

CLockFovVisibleButton.Visible = nil
CLockFovSizeBox.Visible = nil

AdvancedFovFix = Instance.new("Frame", TabsFrame)
AdvancedFovFix.Transparency = 1
AdvancedFovFix.Name = "AdvancedFov"

TriggerbotButton = NewButton("Enabled", TriggerBotFrame, "Triggerbot", 1, false, getgenv().CurrentSXConfig.TriggerbotEnabled)
TriggerbotKeybindButton = NewButton("Keybind", TriggerBotFrame, "Keybind = V", 2, true)
TriggerbotModeButton = NewButton("Mode", TriggerBotFrame, "Mode = " ..getgenv().CurrentSXConfig.TriggerbotMode, 3, true)

AimbotEnabledButton = NewButton("Enabled", AimbotFrame, "Aimbot", 3, false, getgenv().CurrentSXConfig.AimbotEnabled)
AimbotKeybindButton = NewButton("Keybind", AimbotFrame, "Keybind = C", 4, true)
AimbotSmoothnessBox = NewBox("Smoothness", AimbotFrame, "Smoothness = 0", 5, true)

Tabs.Aimbot = {
	CLockFrame,
	AimbotFrame,
	CLockChecksFrame
}

Tabs.AdvancedFov = {
	AdvancedFovFrame,
	TriggerBotFrame
}

-- Fling

FlingButton = NewButton("Fling", FlingFrame, "Fling selected plr", 1, true)
FlingBox = NewBox("Checks", FlingFrame, "Target = " ..getgenv().CurrentSXConfig.FlingTarget.DisplayName, 2, false, getgenv().CurrentSXConfig.FlingEnabled)
FlingKeybindButton = NewButton("Keybind", FlingFrame, "Keybind = none", 3, true)
FlingAllButton = NewButton("Fling", FlingFrame, "Fling all", 4, true)
FlingWhitelistButton = NewButton("Whitelist", FlingFrame, "Fling all whitelist", 5, true)
FlingLoopButton = NewButton("Loop", FlingFrame, "Loop fling", 6, false, getgenv().CurrentSXConfig.FlingLoop)
FlingToolButton = NewButton("Tool", FlingFrame, "Give fling tool", 7, true)

SitCheckButton = NewButton("Check", FlingChecksFrame, "Sit", 1, false, getgenv().CurrentSXConfig.FlingSitCheck)
FriendCheckButton = NewButton("Check", FlingChecksFrame, "Friend", 2)
FlingTeamCheckButton = NewButton("Check", FlingChecksFrame, "Team", 3)

Tabs.Fling = {
	FlingFrame,
	FlingChecksFrame
}

SitCheckButton.Frame.Frame.Visible = true

-- PartManipulation

PartButton = NewButton("Enabled", PartManipulationFrame, "Part manipulation", 1, false, getgenv().CurrentSXConfig.PartManipulationEnabled)
PartKeybindButton = NewButton("Keybind", PartManipulationFrame, "Keybind = " ..tostring(getgenv().CurrentSXConfig.PartManipulationKey), 2, true)
PartSpeedBox = NewBox("Speed", PartManipulationFrame, "Speed = " ..tostring(getgenv().CurrentSXConfig.PartManipulationSpeed), 3)
PartDistanceBox = NewBox("Distance", PartManipulationFrame, "Distance = " ..tostring(getgenv().CurrentSXConfig.PartManipulationDistance), 4)
PartPlayerBox = NewBox("Player", PartManipulationFrame, "Player = " ..getgenv().CurrentSXConfig.PartManipulationPlayer.DisplayName, 5)
PartPlayerToolButton = NewButton("Tool", PartManipulationFrame, "Give player tool", 6, true)

PartMouseButton = NewButton("Mouse", PartManipulationTypeFrame, "Mouse", 1, false, getgenv().CurrentSXConfig.PartManipulationType == "Mouse")
PartOrbitButton = NewButton("Orbit", PartManipulationTypeFrame, "Orbit", 2, false, getgenv().CurrentSXConfig.PartManipulationType == "Orbit")
PartPlayerButton = NewButton("Player", PartManipulationTypeFrame, "Player", 2, false, getgenv().CurrentSXConfig.PartManipulationType == "Player")

Tabs.PartManipulation = {
	PartManipulationFrame,
	PartManipulationTypeFrame
}

-- Other

local ESPEnabledButton = NewButton("Enabled", ESPFrame, "ESP", 1, false, getgenv().CurrentSXConfig.ESPEnabled)
local ESPKeybindButton = NewButton("Keybind", ESPFrame, "Keybind = N", 2, true)
local ESPNameEnabledButton = NewButton("NameEnabled", ESPFrame, "Names", 3, false, getgenv().CurrentSXConfig.ESPNameEnabled)
local ESPColorEnabledButton = NewButton("ColorEnabled", ESPFrame, "Color Targeted aimbot player", 4, false, getgenv().CurrentSXConfig.ESPColorEnabled)
local ESPColorBox = NewBox("Color", ESPFrame, "Color = 255,255,0", 5)
local ESPAdvancedButton = NewButton("Advanced", ESPFrame, "Advanced options", 6, true)
local ESPOutlineTypeButton = NewButton("Boxes", AdvancedESP1, "Outline type = none", 1, true)
local ESPLinesButton = NewButton("Lines", AdvancedESP1, "Lines", 2, false, getgenv().CurrentSXConfig.ESPLinesEnabled)
local NotTargetedESPColorBox = NewBox("Color", AdvancedESP2, "Color = 255,255,255", 1)
local ESPTeamColorButton = NewButton("TeamColor", AdvancedESP2, "Adjust colors for teams", 2, false, getgenv().CurrentSXConfig.ESPTeamColor)
local ESPRainbowButton = NewButton("Rainbow", AdvancedESP2, "LGBTQ+", 6, false, getgenv().CurrentSXConfig.ESPRainbowEnabled)
local ESPLifeButton = NewButton("Rainbow", AdvancedESP2, "Show player life", 6, false, getgenv().CurrentSXConfig.ESPLifeEnabled)

ESPColorBox.Visible = nil
Tabs["AdvancedESP"] = {AdvancedESP1, AdvancedESP2}

local BangEnabledButton = NewButton("Enabled", BangFrame, "Bang", 1, false, getgenv().CurrentSXConfig.BangEnabled)
local BangKeybindButton = NewButton("Keybind", BangFrame, "Keybind = B", 2, true)
local BTypeButton = NewButton("Type", BangFrame, "Type = Back", 3, true)
local BangPlayerBox = NewBox("Player", BangFrame, "Player = " ..getgenv().CurrentSXConfig.PlayerToBang.DisplayName, 4)

local RTEnabledButton = NewButton("Enabled", ChatFrame, "Rizz Talk", 1, true)
local RTKeybindButton = NewButton("Keybind", ChatFrame, "Keybind = None", 2, true)
local TTEnabledButton = NewButton("Enabled", ChatFrame, "Trash Talk", 3, true)
local TTKeybindButton = NewButton("Keybind", ChatFrame, "Keybind = None", 4, true)
ChatArtButton = NewButton("Art", ChatFrame, "Chat Art", 5, true)
JTool = NewButton("Tool", ChatFrame, "Give jerk off tool", 6, true)
WateverIsThisMadness = NewButton("Tool", ChatFrame, "Exec UTG5", 7, true)
DeleteToolButton = NewButton("Tool", nil, "Give delete tool", 5, true)

Tabs.Other = {
	ESPFrame,
	BangFrame,
	ChatFrame,
}

TabsFrame.Visible = nil
MenuFrame.BackgroundTransparency = 1

-- Presets 

function ToggleKeybindActive(v : TextButton)

	local Connection

	if table.find(getgenv().CurrentSXConfig.KeybindsWhitelist, string.sub(v.TextLabel.Text, #v.TextLabel.Text, #v.TextLabel.Text)) then

		table.remove(getgenv().CurrentSXConfig.KeybindsWhitelist, table.find(getgenv().CurrentSXConfig.KeybindsWhitelist, string.sub(v.TextLabel.Text, #v.TextLabel.Text, #v.TextLabel.Text)))
		v.Visible = nil

		pcall(function()

			Connection:Disconnect()

		end)

	else

		local OldKey = string.sub(v.TextLabel.Text, #v.TextLabel.Text, #v.TextLabel.Text)

		print(OldKey)

		table.insert(getgenv().CurrentSXConfig.KeybindsWhitelist, string.sub(v.TextLabel.Text, #v.TextLabel.Text, #v.TextLabel.Text))
		v.Visible = true

		Connection = v:GetPropertyChangedSignal("Text"):Connect(function()

			if string.sub(v.Text, #v.Text, #v.Text) == "." then return end

			table.remove(getgenv().CurrentSXConfig.KeybindsWhitelist, table.find(getgenv().CurrentSXConfig.KeybindsWhitelist, OldKey))
			table.insert(getgenv().CurrentSXConfig.KeybindsWhitelist, string.sub(v.TextLabel.Text, #v.TextLabel.Text, #v.TextLabel.Text))

		end)

	end

	task.spawn(function()

		WhitelistFrame:WaitForChild(v.Parent.Name).Frame.Frame.Visible = v.Visible

	end)

end

if game.GameId == 6035872082 then --Rivals

	warn("Rivals")

	KeybindsActive = false
	ToggleKeybindActive(FlyKeybindButton)
	ToggleKeybindActive(AimbotKeybindButton)

	getgenv().CurrentSXConfig.FlySpeed = 10

	getgenv().CurrentSXConfig.KOCheck = true

	getgenv().CurrentSXConfig.ESPEnabled = true
	getgenv().CurrentSXConfig.ESPNameEnabled = true
	getgenv().CurrentSXConfig.ESPColorEnabled = true
	getgenv().CurrentSXConfig.ESPColor = Color3.new(1, 0, 0)
	getgenv().CurrentSXConfig.ESPOutlineType = "Highlight"
	getgenv().CurrentSXConfig.ESPLinesEnabled = true
	getgenv().CurrentSXConfig.ESPRainbowEnabled = true
	getgenv().CurrentSXConfig.ESPLifeEnabled = true
	
	workspace.ChildAdded:Connect(function(Child)
		
		if Child.Name == "Smoke Grenade" then
			
			task.wait()
			Child:Destroy()
			
		end
		
	end)
	
	for i,v in PLR.PlayerGui.MainGui.MainFrame.FighterInterfaces:GetChildren() do
		
		v:WaitForChild("WarningVignette"):Destroy()
		
	end
	
	PLR.PlayerGui.ChildAdded:Connect(function(Child)
		
		if Child.Name == "FlashbangGui" then
			
			Child.Enabled = nil
			
		end
		
	end)
	
	PLR.PlayerGui.MainGui.MainFrame.FighterInterfaces.ChildAdded:Connect(function(v)
		
		v.WarningVignette:Destroy()
		
	end)
	
	local Replication = game:GetService("ReplicatedStorage").Remotes.Replication.Fighter
	
	Replication.WasSmoked:Destroy()
	Replication.BlindedEffect:Destroy()
	Replication.OutOfBounds:Destroy()
	
end

if Ver == "Safe" then

	table.remove(Tabs.Movement, table.find(Tabs.Movement, SpeedFrame))
	table.remove(Tabs.Other, table.find(Tabs.Other, ESPFrame))

end

for i,v in MenuUI:GetDescendants() do

	if v:IsA("TextButton") and v:FindFirstChild("TextLabel") then

		v.MouseEnter:Connect(function()

			HoverSound:Play()
			v.TextLabel.TextColor3 = Color3.fromRGB(255, 0, 0)

		end)

		v.MouseLeave:Connect(function()

			v.TextLabel.TextColor3 = Color3.new(1,1,1)

		end)

		v.MouseButton1Down:Connect(function()

			ClickSound:Play()

		end)

	elseif v:IsA("ImageButton") then

		v.MouseEnter:Connect(function()

			HoverSound:Play()
			v.ImageColor3 = Color3.fromRGB(255, 0, 0)

		end)

		v.MouseLeave:Connect(function()

			v.ImageColor3 = Color3.new(1,1,1)

		end)

		v.MouseButton1Down:Connect(function()

			ClickSound:Play()

		end)

	end

	if v.Name == "Keybind" then

		local Name = v.Parent.Name
		local Button = NewButton(Name, WhitelistFrame, Name, i)
		local Connection

		Button.Size = UDim2.new(0.9, 0, 0.025, 0)

		Button.MouseButton1Down:Connect(function()

			ToggleKeybindActive(v)

		end)

	end

end


ExitButton.MouseButton1Down:Connect(function()

	MenuUI.Enabled = not MenuUI.Enabled
	UIS.MouseBehavior = MouseBehavior
	UIS.MouseIconEnabled = MouseVisible

end)

local TotalToLoad = 0
local Loaded = 0

for i,v in Tabs do

	TotalToLoad += 1

end

-- Home

-- Interface

-- Size

InterfaceSizeButton.MouseButton1Down:Connect(function(PosX, PosY)

	SizeFrame.Position = UDim2.new(0,PosX,0,PosY)
	SizeFrame.Visible = true

end)

SmallButton.MouseButton1Down:Connect(function()

	SizeFrame.Visible = nil
	InterfaceSizeButton.TextLabel.Text = "Size = Small"
	MenuFrame.Size = UDim2.new(0.25,0,0.25,0)

end)

MediumButton.MouseButton1Down:Connect(function()

	SizeFrame.Visible = nil
	InterfaceSizeButton.TextLabel.Text = "Size = Medium"
	MenuFrame.Size = UDim2.new(0.5,0,0.5,0)

end)

BigButton.MouseButton1Down:Connect(function()

	SizeFrame.Visible = nil
	InterfaceSizeButton.TextLabel.Text = "Size = Big"
	MenuFrame.Size = UDim2.new(0.75,0,0.75,0)

end)

Size2Button.MouseButton1Down:Connect(function()

	SizeFrame.Visible = nil
	InterfaceSizeButton.TextLabel.Text = "Size = Size 2 fish"
	MenuFrame.Size = UDim2.new(1,0,1,0)

	local ImgLabel = Instance.new("ImageLabel")
	local TW = game.TweenService:Create(ImgLabel, TweenInfo.new(2.5, Enum.EasingStyle.Linear), {ImageTransparency = 1})

	ImgLabel.Size = UDim2.new(1,0,1,0)
	ImgLabel.Image = "http://www.roblox.com/asset/?id=84861241476453"
	ImgLabel.BackgroundTransparency = 1
	ImgLabel.Parent = MenuUI
	VineBoom:Play()

	TW:Play()
	TW.Completed:Wait()

	ImgLabel:Destroy()

end)

InterfaceKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	InterfaceKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.Key = Inp.KeyCode
			InterfaceKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until InterfaceKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

--QOL

--Keybinds

KeybindsToggleButton.Frame.Frame.Visible = true

local function KeyBindsToggle(Val)

	if getgenv().CurrentSXConfig.KDB then return end

	getgenv().CurrentSXConfig.KDB = true
	KeybindsActive = Val
	KeybindsToggleButton.Frame.Frame.Visible = KeybindsActive

	if KeybindsActive then

		WhitelistButton.Visible = nil

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "Enableing keybinds this might take time..."
		})

		for i,v in MenuUI:GetDescendants() do

			task.wait()

			if v.Name == "Keybind" then

				v.Visible = true

			end

		end

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "Successfully enabled keybinds"
		})

	else

		WhitelistButton.Visible = true

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "Disableing keybinds this might take time..."
		})

		for i,v in MenuUI:GetDescendants() do

			task.wait()

			if v.Name == "Keybind" then

				v.Visible = not table.find(getgenv().CurrentSXConfig.KeybindsWhitelist, string.sub(v.TextLabel.Text, #v.TextLabel.Text, #v.TextLabel.Text))

			end

		end

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "Successfully disabled keybinds"
		})

	end

	getgenv().CurrentSXConfig.KDB = nil

end

task.spawn(function()

	KeyBindsToggle(KeybindsActive)

end)

KeybindsToggleButton.MouseButton1Down:Connect(function()

	KeyBindsToggle(not KeybindsActive)

end)

WhitelistButton.MouseButton1Down:Connect(function(PosX, PosY)

	WhitelistFrame.Position = UDim2.new(0,PosX,0,PosY)
	WhitelistFrame.Visible = not WhitelistFrame.Visible

end)

-- Mouse

task.spawn(function()

	local MouseBehaviors = {
		Enum.MouseBehavior.LockCenter,
		Enum.MouseBehavior.LockCurrentPosition,
		Enum.MouseBehavior.Default
	}

	while task.wait() do

		for i,v in MouseBehaviors do

			if v == MouseBehavior then continue end

			MouseBehaviorButton.MouseButton1Down:Wait()

			MouseBehavior = v
			MouseBehaviorButton.TextLabel.Text = "Mouse behavior = " ..string.split(tostring(v), ".")[3]

		end

	end

end)

MouseVisibleButton.Frame.Frame.Visible = MouseVisible

MouseVisibleButton.MouseButton1Down:Connect(function()

	MouseVisible = not MouseVisible
	MouseVisibleButton.Frame.Frame.Visible = MouseVisible

end)

CustomCursorButton.MouseButton1Down:Connect(function()

	CustomCursor = not CustomCursor
	CustomCursorButton.Frame.Frame.Visible = CustomCursor

end)

-- Configs

function UpdateUIFromConfig()
	local config = getgenv().CurrentSXConfig

	-- Boolean buttons
	local boolButtons = {
		{btn = FlyEnabledButton, key = "FlyEnabled"},
		{btn = InfJumpEnabledButton, key = "InfJumpEnabled"},
		{btn = SpeedEnabledButton, key = "SpeedEnabled"},
		{btn = CTPEnabledButton, key = "CTPEnabled"},
		{btn = PTPEnabledButton, key = "PTPEnabled"},
		{btn = CLockEnabledButton, key = "CLockEnabled"},
		{btn = CLockFovEnableButton, key = "CLockFovEnabled"},
		{btn = FovRainbowButton, key = "FovRainbowEnabled"},
		{btn = TriggerbotButton, key = "TriggerbotEnabled"},
		{btn = AimbotEnabledButton, key = "AimbotEnabled"},
		{btn = FlingBox, key = "FlingEnabled"},
		{btn = FlingLoopButton, key = "FlingLoop"},
		{btn = SitCheckButton, key = "FlingSitCheck"},
		{btn = ESPEnabledButton, key = "ESPEnabled"},
		{btn = ESPNameEnabledButton, key = "ESPNameEnabled"},
		{btn = ESPColorEnabledButton, key = "ESPColorEnabled"},
		{btn = ESPTeamColorButton, key = "ESPTeamColor"},
		{btn = ESPRainbowButton, key = "ESPRainbowEnabled"},
		{btn = ESPLifeButton, key = "ESPLifeEnabled"},
		{btn = BangEnabledButton, key = "BangEnabled"},
		{btn = KeybindsToggleButton, key = "KeybindsActive"},
		{btn = MouseVisibleButton, key = "MouseVisible"},
		{btn = CustomCursorButton, key = "CustomCursor"},
		{btn = KOCheckButton, key = "KOCheck"},
		{btn = WallCheckButton, key = "WallCheck"},
		{btn = TeamCheckButton, key = "TeamCheck"},
	}

	for i = 1, #boolButtons do
		local btn = boolButtons[i]["btn"]
		if btn then
			if not btn:FindFirstChild("Frame") then continue end
			if not btn.Frame:FindFirstChild("Frame") then continue end
			btn.Frame.Frame.Visible = config[boolButtons[i]["key"]]
		end
	end

	-- Boxes
	local boxes = {
		{box = FlySpeedBox, key = "FlySpeed", prefix = "Speed = "},
		{box = SpeedSpeedBox, key = "SpeedSpeed", prefix = "Speed = "},
		{box = PTPPlayerBox, key = "PlayerToTP", prefix = "Player = ", isPlayer = true},
		{box = BangPlayerBox, key = "PlayerToBang", prefix = "Player = ", isPlayer = true},
		{box = FlingBox, key = "FlingTarget", prefix = "Target = ", isPlayer = true},
		{box = AimbotSmoothnessBox, key = "AimbotSmoothness", prefix = "Smoothness = "},
		{box = ESPColorBox, key = "ESPColor", prefix = "Color = ", isColor = true},
		{box = NotTargetedESPColorBox, key = "NoEffectESPColor", prefix = "Color = ", isColor = true}
	}

	for i = 1, #boxes do
		local entry = boxes[i]
		if entry.box then
			if entry.isPlayer then
				config[entry.key] = game.Players:GetPlayers()[math.random(1, #game.Players:GetPlayers())]
				entry["box"].Text = entry.prefix .. config[entry.key].DisplayName
			elseif entry.isColor then
				local c = config[entry.key] or Color3.new(1,1,1)
				entry.box.Text = entry.prefix .. string.format("%d,%d,%d", c.R*255, c.G*255, c.B*255)
			elseif entry.key then
				entry.box.Text = entry.prefix .. tostring(config[entry.key])
			end
		end
	end
end

SaveConfigsButton.MouseButton1Down:Connect(function()
	
	local Data = tostring(game:GetService("HttpService"):JSONEncode(getgenv().CurrentSXConfig))
	
	writefile(ConfigNameBox.Text, Data)
	
end)

LoadConfigsButton.MouseButton1Down:Connect(function()
	
	if ConfigNameBox.Text == "" then
		
		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "No configuration name input"
		})
		
		return
		
	end
	
	if isfile(ConfigNameBox.Text) then
		
		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "Loading config with name : " ..ConfigNameBox.Text.. "..."
		})
		
		getgenv().CurrentSXConfig = game:GetService("HttpService"):JSONDecode(readfile(ConfigNameBox.Text))
		UpdateUIFromConfig()
		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "Done"
		})
		
	else
		
		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "No configuration called " ..ConfigNameBox.Text
		})
		
	end
	
end)

Loaded += 1

local TWL = TW:Create(LoadingBar, TweenInfo.new(0.25), {Size = UDim2.new(Loaded / TotalToLoad,0,1,0)})

TWL:Play()
TWL.Completed:Wait()
-- Mtn la chaise gaming OP

--Fly

local function FlyActivate()

	getgenv().CurrentSXConfig.FlyEnabled = not getgenv().CurrentSXConfig.FlyEnabled
	FlyEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.FlyEnabled

	if getgenv().CurrentSXConfig.FlyEnabled then

		local FlyCFrame = Char.HumanoidRootPart.CFrame

		while getgenv().CurrentSXConfig.FlyEnabled do

			task.wait()

			if not Char then continue end
			if not Char:FindFirstChild("HumanoidRootPart") then continue end

			local Inps = {}
			local KKInps = UIS:GetKeysPressed()

			for i,v in KKInps do

				table.insert(Inps, v.KeyCode)

			end

			if table.find(Inps, Enum.KeyCode.W) then

				FlyCFrame += Cam.CFrame.LookVector * (getgenv().CurrentSXConfig.FlySpeed / 10)

			elseif table.find(Inps, Enum.KeyCode.S) then

				FlyCFrame += Cam.CFrame.LookVector * (-getgenv().CurrentSXConfig.FlySpeed / 10)

			elseif table.find(Inps, Enum.KeyCode.D) then

				FlyCFrame += Cam.CFrame.RightVector * (getgenv().CurrentSXConfig.FlySpeed / 10)

			elseif table.find(Inps, Enum.KeyCode.A) then

				FlyCFrame += Cam.CFrame.RightVector * (-getgenv().CurrentSXConfig.FlySpeed / 10)

			else

				Char.HumanoidRootPart.AssemblyLinearVelocity = Vector3.zero

			end

			Char.HumanoidRootPart.CFrame = FlyCFrame

		end

		Char.HumanoidRootPart.AssemblyLinearVelocity = Vector3.zero
		Char.HumanoidRootPart.Massless = nil

	else

		for i,v in getgenv().CurrentSXConfig.OldCollides do

			v.CanCollide = true

		end

		table.clear(getgenv().CurrentSXConfig.OldCollides)

	end
end

FlyEnabledButton.MouseButton1Down:Connect(FlyActivate)

FlyKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	FlyKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.FlyKey = Inp.KeyCode
			FlyKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until FlyKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

FlySpeedBox.FocusLost:Connect(function(EP)

	if not EP or not tonumber(FlySpeedBox.Text) then FlySpeedBox.Text = "Speed = " ..getgenv().CurrentSXConfig.FlySpeed return end

	getgenv().CurrentSXConfig.FlySpeed = tonumber(FlySpeedBox.Text)
	FlySpeedBox.Text = "Speed = " ..getgenv().CurrentSXConfig.FlySpeed

end)

--Math.Huge jump

local function InfJumpEnable()

	getgenv().CurrentSXConfig.InfJumpEnabled = not getgenv().CurrentSXConfig.InfJumpEnabled
	InfJumpEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.InfJumpEnabled

	if getgenv().CurrentSXConfig.InfJumpEnabled then

		local JumpLoop = UIS.JumpRequest:Connect(function()

			Char.Humanoid:ChangeState("Jumping")

		end)

		while getgenv().CurrentSXConfig.InfJumpEnabled do

			task.wait()

		end

		JumpLoop:Disconnect()

	end

end

InfJumpEnabledButton.MouseButton1Down:Connect(InfJumpEnable)

InfJumpKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	InfJumpKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.InfJumpKey = Inp.KeyCode
			InfJumpKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until InfJumpKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

--Speed

local function SpeedActivate()

	getgenv().CurrentSXConfig.SpeedEnabled = not getgenv().CurrentSXConfig.SpeedEnabled
	SpeedEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.SpeedEnabled

	if getgenv().CurrentSXConfig.SpeedEnabled then

		while getgenv().CurrentSXConfig.SpeedEnabled do

			task.wait()

			if not Char:FindFirstChild("Humanoid") then continue end

			Char.Humanoid.WalkSpeed = getgenv().CurrentSXConfig.SpeedSpeed

		end

	else

		Char.Humanoid.WalkSpeed = 16

	end
end

SpeedEnabledButton.MouseButton1Down:Connect(SpeedActivate)

SpeedKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	SpeedKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.SpeedKey = Inp.KeyCode
			SpeedKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until SpeedKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

SpeedSpeedBox.FocusLost:Connect(function(EP)

	if not EP or not tonumber(SpeedSpeedBox.Text) then SpeedSpeedBox.Text = "Speed = " ..getgenv().CurrentSXConfig.SpeedSpeed return end

	getgenv().CurrentSXConfig.SpeedSpeed = tonumber(SpeedSpeedBox.Text)
	SpeedSpeedBox.Text = "Speed = " ..getgenv().CurrentSXConfig.SpeedSpeed

end)

--TP

--Click to tp

local function CTPEnable()

	getgenv().CurrentSXConfig.CTPEnabled = not getgenv().CurrentSXConfig.CTPEnabled
	CTPEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.CTPEnabled

	if getgenv().CurrentSXConfig.CTPEnabled then

		local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

			if GPE then return end

			if Inp.UserInputType == Enum.UserInputType.MouseButton1 then

				local MP = UIS:GetMouseLocation()
				local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
				local Result = workspace:Raycast(Cam.CFrame.Position, MR.Direction * 999999, getgenv().CurrentSXConfig.CTPParams)

				PLR.Character:PivotTo(CFrame.new(Result.Position))

			end

		end)

		repeat wait() until not getgenv().CurrentSXConfig.CTPEnabled

		Connection:Disconnect()

	end

end

CTPEnabledButton.MouseButton1Down:Connect(CTPEnable)

CTPKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	CTPKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.CTPKey = Inp.KeyCode
			CTPKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until CTPKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

-- TP to player

local function PTPEnable()

	Char:PivotTo(getgenv().CurrentSXConfig.PlayerToTP.Character:GetPivot())

end

game:GetService("Players").PlayerRemoving:Connect(function(plr)

	if plr == getgenv().CurrentSXConfig.PlayerToTP then

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "The targeted player of your tp (" ..getgenv().CurrentSXConfig.PlayerToTP.DisplayName.. ") has left changed target to you."
		})

		getgenv().CurrentSXConfig.PlayerToTP = game:GetService("Players"):GetPlayers()[1]
		PTPPlayerBox.TextLabel.Text = "Player = " ..getgenv().CurrentSXConfig.PlayerToTP.DisplayName

	end

end)

PTPEnabledButton.MouseButton1Down:Connect(PTPEnable)

PTPKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	PTPKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.PTPKey = Inp.KeyCode
			PTPKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until PTPKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

PTPPlayerBox.FocusLost:Connect(function(EP)

	if not EP then return end

	local PlayerName = PTPPlayerBox.Text
	local PLayer

	for i,v in game:GetService("Players"):GetPlayers() do

		if PLayer then continue end

		if string.find(string.lower(v.DisplayName), string.lower(PlayerName)) then

			PLayer = v
			getgenv().CurrentSXConfig.PlayerToTP = v

		end

	end

	PTPPlayerBox.Text = "Player = " ..getgenv().CurrentSXConfig.PlayerToTP.DisplayName

end)

Loaded += 1

TWL:Cancel()
TWL = TW:Create(LoadingBar, TweenInfo.new(0.25), {Size = UDim2.new(Loaded / TotalToLoad,0,1,0)})
TWL:Play()
TWL.Completed:Wait()

--Aimbot

--CLock

local function FindPlr()

	local Target
	local TDist = 1000000

	for i,v in game:GetService("Players"):GetPlayers() do

		if v == PLR then continue end
		if not v.Character then continue end
		if not v.Character:FindFirstChild("Humanoid") then continue end
		if not v.Character:FindFirstChild("HumanoidRootPart") then continue end
		--if (v.Character:GetPivot().Position - Char:GetPivot().Position).Magnitude > MaxDist then continue end

		if KOCheck then

			if v.Character.Humanoid.Health <= 0 then continue end

		end

		if TeamCheck then

			if PLR.Team then

				if v.Team == PLR.Team then continue end

			end 

		end

		local MP = game.UserInputService:GetMouseLocation()
		local Pos, IsOnScreen = Cam.WorldToScreenPoint(Cam, v.Character.HumanoidRootPart.Position)
		local Position = Vector2.new(Pos.X, Pos.Y) 

		if not IsOnScreen then continue end
		if (Position - MP).Magnitude >= TDist then continue end

		if getgenv().CurrentSXConfig.CLockFovEnabled then

			if (Position - MP).Magnitude >= FovSize then continue end

		end

		if WallCheck then

			local Origin = Char.HumanoidRootPart.Position
			local Direction = (v.Character.HumanoidRootPart.Position - Origin) * 9999999999
			local Params = RaycastParams.new()

			Params.FilterDescendantsInstances = {Char}
			Params.FilterType = Enum.RaycastFilterType.Exclude

			local Result = workspace:Raycast(Origin, Direction, Params)

			if not Result then continue end
			--if not Result.Instance:GetRootPart() then continue end
			if Result.Instance.Parent ~= v.Character and Result.Instance.Parent.Parent ~= v.Character then continue end

		end

		Target = v
		TDist = (Position - MP).Magnitude

	end

	return Target

end

local function CLockEnable()

	getgenv().CurrentSXConfig.CLockEnabled = not getgenv().CurrentSXConfig.CLockEnabled
	CLockEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.CLockEnabled

	if getgenv().CurrentSXConfig.CLockEnabled then

		getgenv().CurrentSXConfig.AimbotEnabled = nil

		local Target = FindPlr()

		if not Target then getgenv().CurrentSXConfig.CLockEnabled = nil return end

		UIS.MouseBehavior = Enum.MouseBehavior.LockCenter

		while getgenv().CurrentSXConfig.CLockEnabled do

			task.wait()

			if not Target.Character then continue end
			if not Target.Character:FindFirstChild("Humanoid") then continue end

			if KOCheck then

				if Target.Character.Humanoid.Health <= 0 then getgenv().CurrentSXConfig.CLockEnabled = nil continue end

			end

			Cam.CameraType = Enum.CameraType.Custom
			Cam.CameraSubject = Target.Character.Humanoid

		end

		UIS.MouseBehavior = Enum.MouseBehavior.Default
		Cam.CameraSubject = Char.Humanoid

	else

		UIS.MouseBehavior = Enum.MouseBehavior.Default

	end

end

CLockEnabledButton.MouseButton1Down:Connect(CLockEnable)

CLockKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	CLockKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.CLockKey = Inp.KeyCode
			CLockKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until CLockKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

AdvancedFovButton.Visible = getgenv().CurrentSXConfig.CLockFovEnabled

CLockFovEnableButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.CLockFovEnabled = not getgenv().CurrentSXConfig.CLockFovEnabled
	CLockFovEnableButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.CLockFovEnabled
	CLockFovVisibleButton.Visible = getgenv().CurrentSXConfig.CLockFovEnabled
	CLockFovSizeBox.Visible = getgenv().CurrentSXConfig.CLockFovEnabled
	AdvancedFovButton.Visible = getgenv().CurrentSXConfig.CLockFovEnabled

end)

CLockFovVisibleButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.FovVisible = not getgenv().CurrentSXConfig.FovVisible
	CLockFovVisibleButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.FovVisible

end)

CLockFovSizeBox.FocusLost:Connect(function(EP)

	if not EP then return end
	if not tonumber(CLockFovSizeBox.Text) then return end

	FovSize = tonumber(CLockFovSizeBox.Text)
	CLockFovSizeBox.Text = "Fov size = " ..FovSize

end)

AdvancedFovButton.MouseButton1Down:Connect(function()

	if CurrentTab == "AdvancedFov" then return end

	TabsFrame[CurrentTab].BackgroundColor3 = Color3.fromRGB(70,70,70)

	for i,v in Tabs[CurrentTab] do

		v.Visible = nil

	end

	for i,v in Tabs["AdvancedFov"] do

		v.Visible = true

	end

	CurrentTab = "AdvancedFov"

end)

FovRainbowButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.FovRainbowEnabled = not getgenv().CurrentSXConfig.FovRainbowEnabled
	FovRainbowButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.FovRainbowEnabled

	if getgenv().CurrentSXConfig.FovRainbowEnabled then

		local RainbowVal = Instance.new("Color3Value")
		local ColorTbl = {
			BrickColor.Red().Color,
			BrickColor.Yellow().Color,
			BrickColor.Blue().Color,
			Color3.new(1,0,1),
			Color3.new(0.5,0,1)
		}

		task.spawn(function()

			while getgenv().CurrentSXConfig.FovRainbowEnabled do

				task.wait()

				FovFrameBorder.Color = RainbowVal.Value

			end

		end)

		while getgenv().CurrentSXConfig.FovRainbowEnabled do

			task.wait()

			for i,v in ColorTbl do

				local TWER = TW:Create(RainbowVal, TweenInfo.new(1, Enum.EasingStyle.Linear), {Value = v})

				TWER:Play()
				TWER.Completed:Wait()

			end

		end

	else

		FovFrameBorder.Color = Color3.new(0, 0, 0)

	end

end)

-- Aimbot

if not Char:FindFirstChild("Head") then

	Extra = (Cam.CFrame.Position - PLR.Character.HumanoidRootPart.Position).Magnitude

else

	Extra = (Cam.CFrame.Position - PLR.Character.Head.Position).Magnitude

end

local function CenterCamOnTarget(Target)

	if not Target or not Target.Character then return end
	if not Target.Character:FindFirstChild("Humanoid") then return end
	if not Char or not Char:FindFirstChild("Head") then return end

	local Humanoid = Target.Character:FindFirstChild("Humanoid")
	if KOCheck and (not Humanoid or Humanoid.Health <= 0) then getgenv().CurrentSXConfig.AimbotEnabled = nil return end

	local TPart = Target.Character:FindFirstChild("Head") or Target.Character:FindFirstChild("HumanoidRootPart")
	if not TPart then return end

	--local function WorldToScreen(Pos) --This function gets a World Position (Pos) and returns a Vector2 value of the screen coordinates
	--	local M = PLR:GetMouse()

	--	local point = Cam.CoordinateFrame:pointToObjectSpace(Pos)
	--	local aspectRatio = M.ViewSizeX / M.ViewSizeY
	--	local hfactor = math.tan(math.rad(Cam.FieldOfView) / 2)
	--	local wfactor = aspectRatio*hfactor

	--	local x = (point.x/point.z) / -wfactor
	--	local y = (point.y/point.z) /  hfactor

	--	return Vector2.new(M.ViewSizeX * (0.5 + 0.5 * x), M.ViewSizeY * (0.5 + 0.5 * y))
	--end

	--local Pos = WorldToScreen(TPart.Position)
	--UIS.MouseBehavior = Enum.MouseBehavior.Default
	--mousemoveabs(Pos.X, Pos.Y)

	local Extra = Extra or 0

	local fromPos = Cam.CFrame.Position
	local goalCFrame = CFrame.lookAt(fromPos, TPart.Position)

	if getgenv().CurrentSXConfig.AimbotSmoothness and getgenv().CurrentSXConfig.AimbotSmoothness > 0 then

		local tween = TW:Create(
			Cam,
			TweenInfo.new(getgenv().CurrentSXConfig.AimbotSmoothness, Enum.EasingStyle.Linear, Enum.EasingDirection.Out),
			{CFrame = goalCFrame}
		)
		tween:Play()
		tween.Completed:Wait()

	else

		Cam.CFrame = goalCFrame

	end

	repeat
		task.wait()
		UIS.MouseBehavior = Enum.MouseBehavior.LockCenter
	until math.abs(UIS:GetMouseLocation().X - Cam.ViewportSize.X/2) < 1
		and math.abs(UIS:GetMouseLocation().Y - Cam.ViewportSize.Y/2) < 1

	UIS.MouseBehavior = Enum.MouseBehavior.Default

end

local function AimbotEnable()
	
	getgenv().CurrentSXConfig.AimbotEnabled = not getgenv().CurrentSXConfig.AimbotEnabled
	AimbotEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.AimbotEnabled

	if getgenv().CurrentSXConfig.AimbotEnabled then

		getgenv().CurrentSXConfig.CLockEnabled = nil

		local Target = FindPlr()

		if not Target then getgenv().CurrentSXConfig.AimbotEnabled = nil return end

		UIS.MouseBehavior = Enum.MouseBehavior.LockCenter

		UIS.InputChanged:Connect(function(Inp, GPE)

			if GPE then return end

			if Inp.UserInputType == Enum.UserInputType.MouseWheel then

				Extra += Inp.Position.Z

			end

		end)

		game["Run Service"]:BindToRenderStep("AutoAimStep", Enum.RenderPriority.Camera.Value + 101, function(dt)

			if not Target then getgenv().CurrentSXConfig.AimbotEnabled = nil return end

			print(Target)

			CenterCamOnTarget(Target)

		end)

		local Connection = game["Run Service"].PostSimulation:Connect(function()

			if not Target then getgenv().CurrentSXConfig.AimbotEnabled = nil return end

			print(Target)

			CenterCamOnTarget(Target)

		end)

		repeat wait() until not getgenv().CurrentSXConfig.AimbotEnabled

		game["Run Service"]:UnbindFromRenderStep("AutoAimStep")
		Connection:Disconnect()
		UIS.MouseBehavior = Enum.MouseBehavior.Default

	else

		UIS.MouseBehavior = Enum.MouseBehavior.Default

	end

end

AimbotEnabledButton.MouseButton1Down:Connect(AimbotEnable)

AimbotKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	AimbotKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.AimbotKey = Inp.KeyCode
			AimbotKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until AimbotKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

AimbotSmoothnessBox.FocusLost:Connect(function(EP)

	if not EP then return end
	if not tonumber(AimbotSmoothnessBox.Text) then AimbotSmoothnessBox.Text = "Smoothness = " ..getgenv().CurrentSXConfig.AimbotSmoothness return end

	getgenv().CurrentSXConfig.AimbotSmoothness = tonumber(AimbotSmoothnessBox.Text)
	AimbotSmoothnessBox.Text = "Smoothness = " ..getgenv().CurrentSXConfig.AimbotSmoothness

end)

function TriggerbotEnable()

	TriggerbotEnabled = not TriggerbotEnabled
	TriggerbotButton.Frame.Frame.Visible = TriggerbotEnabled
	AimbotEnabledButton.Visible = TriggerbotEnabled

	if TriggerbotEnabled then

		getgenv().CurrentSXConfig.AimbotEnabled = true
		AimbotEnable()

		local M1 = nil

		UIS.InputBegan:Connect(function(Inp, GPE)

			if GPE then return end

			if Inp.UserInputType == Enum.UserInputType.MouseButton1 then

				M1 = true

			end

		end)

		UIS.InputEnded:Connect(function(Inp, GPE)

			if Inp.UserInputType == Enum.UserInputType.MouseButton1 then

				M1 = nil

			end

		end)

		while TriggerbotEnabled do

			task.wait()

			local Target = FindPlr()


			if Target and getgenv().CurrentSXConfig.TriggerbotMode == "OnM1" and M1 then

				CenterCamOnTarget(Target)

			end

			if not getgenv().CurrentSXConfig.CLockFovEnabled then continue end
			if getgenv().CurrentSXConfig.TriggerbotMode ~= "Auto" then continue end

			if Target and not getgenv().CurrentSXConfig.AimbotEnabled then

				CenterCamOnTarget(Target)

			end

		end

		M1 = nil

	end

end

TriggerbotButton.MouseButton1Down:Connect(TriggerbotEnable)

TriggerbotModeButton.MouseButton1Down:Connect(function()

	local Num = table.find(getgenv().CurrentSXConfig.TriggerbotModes, getgenv().CurrentSXConfig.TriggerbotMode) + 1

	if Num > #getgenv().CurrentSXConfig.TriggerbotModes then Num = 1 end

	getgenv().CurrentSXConfig.TriggerbotMode = getgenv().CurrentSXConfig.TriggerbotModes[Num]
	TriggerbotModeButton.Text = "Mode = " ..getgenv().CurrentSXConfig.TriggerbotMode

end)

TriggerbotKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	TriggerbotKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.TriggerbotKeybind = Inp.KeyCode
			TriggerbotKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until TriggerbotKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

-- Checks

KOCheckButton.MouseButton1Down:Connect(function()

	KOCheck = not KOCheck
	KOCheckButton.Frame.Frame.Visible = KOCheck

end)

WallCheckButton.MouseButton1Down:Connect(function()

	WallCheck = not WallCheck
	WallCheckButton.Frame.Frame.Visible = WallCheck

end)

TeamCheckButton.MouseButton1Down:Connect(function()

	TeamCheck = not TeamCheck
	TeamCheckButton.Frame.Frame.Visible = TeamCheck

end)

Loaded += 1

TWL:Cancel()
TWL = TW:Create(LoadingBar, TweenInfo.new(0.25), {Size = UDim2.new(Loaded / TotalToLoad,0,1,0)})
TWL:Play()
TWL.Completed:Wait()

-- Fling

function Fling()

	if not getgenv().CurrentSXConfig.FlingTarget then return end
	if getgenv().CurrentSXConfig.FlingTarget == PLR then return end
	if not Char then return end
	if not getgenv().CurrentSXConfig.FlingTarget.Character then return end
	if not getgenv().CurrentSXConfig.FlingTarget.Character:FindFirstChild("HumanoidRootPart") then return end
	if not getgenv().CurrentSXConfig.FlingTarget.Character:FindFirstChild("Humanoid") then return end
	if getgenv().CurrentSXConfig.FlingEnabled then return end
	if not Char.PrimaryPart then return end

	if getgenv().CurrentSXConfig.FlingSitCheck then

		if getgenv().CurrentSXConfig.FlingTarget.Character.Humanoid.Sit then return end

	end

	if getgenv().CurrentSXConfig.FlingFriendCheck then

		if PLR.IsFriendsWith(PLR, getgenv().CurrentSXConfig.FlingTarget.UserId) then return end

	end

	if getgenv().CurrentSXConfig.FlingTeamCheck then

		if PLR.Team == getgenv().CurrentSXConfig.FlingTarget.Team then return end

	end

	getgenv().CurrentSXConfig.FlingEnabled = true

	if getgenv().CurrentSXConfig.FlingEnabled then

		local TCharacter = getgenv().CurrentSXConfig.FlingTarget.Character
		local THumanoid
		local TRootPart
		local THead
		local Accessory
		local RootPart = Char.HumanoidRootPart
		local OldPos = RootPart.CFrame

		if TCharacter:FindFirstChildOfClass("Humanoid") then
			THumanoid = TCharacter:FindFirstChildOfClass("Humanoid")
		end
		if THumanoid and THumanoid.RootPart then
			TRootPart = THumanoid.RootPart
		end
		if TCharacter:FindFirstChild("Head") then
			THead = TCharacter.Head
		end
		if TCharacter:FindFirstChildOfClass("Accessory") then
			Accessory = TCharacter:FindFirstChildOfClass("Accessory")
		end

		local FPos = function(BasePart, Pos, Ang)
			RootPart.CFrame = CFrame.new(BasePart.Position) * Pos * Ang
			Char:SetPrimaryPartCFrame(CFrame.new(BasePart.Position) * Pos * Ang)
			RootPart.Velocity = Vector3.new(9e7, 9e7 * 10, 9e7)
			RootPart.RotVelocity = Vector3.new(9e8, 9e8, 9e8)
		end

		local SFBasePart = function(BasePart)

			local TimeToWait = 2
			local Time = tick()
			local Angle = 0

			repeat
				if RootPart and THumanoid and Char.PrimaryPart then
					if BasePart.Velocity.Magnitude < 50 then
						Angle = Angle + 100

						FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle),0 ,0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(2.25, 1.5, -2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(-2.25, -1.5, 2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
						task.wait()
					else
						FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(math.rad(90), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5, -TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(0, 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 1.25), CFrame.Angles(math.rad(90), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5 ,0), CFrame.Angles(math.rad(-90), 0, 0))
						task.wait()

						FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
						task.wait()
					end
				else
					break
				end
			until BasePart.Velocity.Magnitude > 500 or BasePart.Parent ~= getgenv().CurrentSXConfig.FlingTarget.Character or getgenv().CurrentSXConfig.FlingTarget.Parent ~= game.Players or THumanoid.Sit or Char.Humanoid.Health <= 0 or tick() > Time + TimeToWait
		end

		local BVel = Instance.new("BodyVelocity", Char.HumanoidRootPart)

		BVel.Velocity = Vector3.new(9e8, 9e8, 9e8)
		BVel.MaxForce = Vector3.new(1/0, 1/0, 1/0)

		Char.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)

		SFBasePart(getgenv().CurrentSXConfig.FlingTarget.Character.HumanoidRootPart)

		BVel:Destroy()

		repeat

			pcall(function()

				RootPart.CFrame = OldPos * CFrame.new(0, .5, 0)
				Char:SetPrimaryPartCFrame(OldPos * CFrame.new(0, .5, 0))
				Char.Humanoid:ChangeState("GettingUp")
				table.foreach(Char:GetChildren(), function(_, x)
					if x:IsA("BasePart") then
						x.Velocity, x.RotVelocity = Vector3.new(), Vector3.new()
					end
				end)
				task.wait()

			end)

		until (RootPart.Position - OldPos.p).Magnitude < 25 or not Char.PrimaryPart

		getgenv().CurrentSXConfig.FlingEnabled = nil

	end

end

FlingButton.MouseButton1Down:Connect(function()

	Fling()

	while getgenv().CurrentSXConfig.FlingLoop do

		task.wait()

		Fling()

	end

end)

FlingAllButton.MouseButton1Down:Connect(function()

	local OldTarget = getgenv().CurrentSXConfig.FlingTarget

	for i,v in game:GetService("Players"):GetPlayers() do

		if getgenv().CurrentSXConfig.FlingWhitelist[v.UserId] then continue end

		getgenv().CurrentSXConfig.FlingTarget = v

		Fling()

	end

	while getgenv().CurrentSXConfig.FlingLoop do

		task.wait()

		for i,v in game:GetService("Players"):GetPlayers() do

			if getgenv().CurrentSXConfig.FlingWhitelist[v.UserId] then continue end

			getgenv().CurrentSXConfig.FlingTarget = v

			Fling()

		end

	end

	getgenv().CurrentSXConfig.FlingTarget = OldTarget

end)

FlingKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	FlingKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.FlingKey = Inp.KeyCode
			FlingKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until FlingKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

FlingBox.FocusLost:Connect(function(EP)

	if not EP then return end

	local PlayerName = FlingBox.Text
	local PLayer

	for i,v in game:GetService("Players"):GetPlayers() do

		if PLayer then continue end

		if string.find(string.lower(v.DisplayName), string.lower(PlayerName)) then

			PLayer = v
			getgenv().CurrentSXConfig.FlingTarget = v

		end

	end

	FlingBox.Text = "Player = " ..getgenv().CurrentSXConfig.FlingTarget.DisplayName

end)

game:GetService("Players").PlayerRemoving:Connect(function(plr)

	if plr == getgenv().CurrentSXConfig.FlingTarget then

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "The targeted player of your fling (" ..getgenv().CurrentSXConfig.FlingTarget.DisplayName.. ") has left changed target to you."
		})

		getgenv().CurrentSXConfig.FlingTarget = game:GetService("Players"):GetPlayers()[1]
		FlingBox.Text = "Player = " ..getgenv().CurrentSXConfig.FlingTarget.DisplayName

	end

end)

SitCheckButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.FlingSitCheck = not getgenv().CurrentSXConfig.FlingSitCheck
	SitCheckButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.FlingSitCheck

end)

FriendCheckButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.FlingFriendCheck = not getgenv().CurrentSXConfig.FlingFriendCheck
	FriendCheckButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.FlingFriendCheck

end)

FlingTeamCheckButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.FlingTeamCheck = not getgenv().CurrentSXConfig.FlingTeamCheck
	FlingTeamCheckButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.FlingTeamCheck

end)

FlingWhitelistButton.MouseButton1Down:Connect(function(x, y)

	FlingWhitelistFrame.Visible = not FlingWhitelistFrame.Visible
	FlingWhitelistFrame.Position = UDim2.fromOffset(x, y)

end)

FlingLoopButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.FlingLoop = not getgenv().CurrentSXConfig.FlingLoop
	FlingLoopButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.FlingLoop

end)

for i,v in game:GetService("Players"):GetPlayers() do

	table.insert(getgenv().CurrentSXConfig.FlingToolParamsWhitelist, v)

	local UI = NewButton(v.UserId, FlingWhitelistFrame, v.DisplayName, #FlingWhitelistFrame:GetChildren())

	UI.Size = UDim2.new(0.9, 0, 0.025, 0)

	UI.MouseButton1Down:Connect(function()

		getgenv().CurrentSXConfig.FlingWhitelist[v.UserId] = not getgenv().CurrentSXConfig.FlingWhitelist[v.UserId]

		UI.Frame.Frame.Visible = getgenv().CurrentSXConfig.FlingWhitelist[v.UserId]

	end)

	v.Destroying:Connect(function()

		UI:Destroy()

	end)

end

game:GetService("Players").PlayerAdded:Connect(function(v)

	table.insert(getgenv().CurrentSXConfig.FlingToolParamsWhitelist, v)

	local UI = NewButton(v.UserId, FlingWhitelistFrame, v.DisplayName, #FlingWhitelistFrame:GetChildren())

	UI.Size = UDim2.new(0.9, 0, 0.025, 0)

	UI.MouseButton1Down:Connect(function()

		getgenv().CurrentSXConfig.FlingWhitelist[v.UserId] = not getgenv().CurrentSXConfig.FlingWhitelist[v.UserId]

		UI.Frame.Frame.Visible = getgenv().CurrentSXConfig.FlingWhitelist[v.UserId]

	end)

end)

game:GetService("Players").PlayerRemoving:Connect(function(v)

	table.remove(getgenv().CurrentSXConfig.FlingToolParamsWhitelist, table.find(getgenv().CurrentSXConfig.FlingToolParamsWhitelist, v))

	local UI = FlingWhitelistFrame[v.UserId]

	UI:Destroy()

end)

FlingToolButton.MouseButton1Down:Connect(function()

	local Tool = getgenv().CurrentSXConfig.FlingTool:Clone()
	local Highlight = Instance.new("Highlight")

	Highlight.FillTransparency = 0.5
	Highlight.FillColor = Color3.new(1, 0.580392, 0.0666667)	
	Highlight.OutlineColor = Color3.new(1, 0.580392, 0.0666667)	
	Tool.Parent = PLR.Backpack

	Tool.Activated:Connect(function()

		local MP = UIS:GetMouseLocation()
		local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
		local Result = workspace:Raycast(MR.Origin, MR.Direction * 100000, getgenv().CurrentSXConfig.FlingToolParams)

		if Result then

			if not Result.Instance:GetRootPart() then return end
			if not Result.Instance:GetRootPart().Parent then return end

			local plr = game:GetService("Players"):GetPlayerFromCharacter(Result.Instance:GetRootPart().Parent)

			if not plr then return end

			getgenv().CurrentSXConfig.FlingTarget = plr
			FlingBox.Text = "Player = " ..getgenv().CurrentSXConfig.FlingTarget.DisplayName
			Fling()

		end

	end)

	local function FindGuyIg()

		local Found

		if Tool.Parent == PLR.Character then

			local MP = UIS:GetMouseLocation()
			local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
			local Result = workspace:Raycast(MR.Origin, MR.Direction * 100000, getgenv().CurrentSXConfig.FlingToolParams)

			if Result then

				if not Result.Instance:GetRootPart() then return end
				if not Result.Instance:GetRootPart().Parent then return end

				local plr = game:GetService("Players"):GetPlayerFromCharacter(Result.Instance:GetRootPart().Parent)

				if not plr then return end

				Highlight.Parent = plr.Character
				Found = true

			end

		end

		return Found

	end

	while Tool.Parent do

		task.wait()

		local Found = FindGuyIg()

		if not Found then

			Highlight:Remove()

		end

	end

end)

DeleteToolButton.MouseButton1Down:Connect(function()

	local Tool = getgenv().CurrentSXConfig.DeleteTool:Clone()
	local Highlight = Instance.new("Highlight")

	Highlight.FillTransparency = 0.5
	Highlight.FillColor = Color3.new(1, 0.580392, 0.0666667)	
	Highlight.OutlineColor = Color3.new(1, 0.580392, 0.0666667)	
	Tool.Parent = PLR.Backpack

	Tool.Activated:Connect(function()

		local MP = UIS:GetMouseLocation()
		local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
		local Result = workspace:Raycast(MR.Origin, MR.Direction * 100000)

		if Result then

			print(Result.Instance.Parent)

			Result.Instance.Parent = nil
			Result.Instance:Destroy()

		end

	end)

	while task.wait() do

		local MP = UIS:GetMouseLocation()
		local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
		local Result = workspace:Raycast(MR.Origin, MR.Direction * 100000)

		if Result then

			Highlight.Parent = Result.Instance

		end

	end

end)

-- Part manipulation

local Players, RunService = game:GetService("Players"), game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification",{
	Title = "Network Bypass",
	Text = "Remake Made by Hiyall360",
	Icon = "rbxassetid://12562053596"
})

task.spawn(function()
	
	if not getgenv().Network then
		getgenv().Network = {
			BaseParts = {};
			Velocity = Vector3.new(0,999999,0);
			Output = {
				Enabled = true;
				Prefix = "[NETWORK] ";
				Send = function(Type,Output,BypassOutput)
					if typeof(Type) == "function" and (Type == print or Type == warn or Type == error) and typeof(Output) == "string" then
						if Network.Output.Enabled or BypassOutput then
							Type(Network.Output.Prefix..Output)
						end
					end
				end;
			};
		}
		Network.Output.Send(print,"Network Loaded.")
	end

	local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

	for _,h in pairs(char:GetChildren()) do
		if h:IsA("Accessory") then
			local hd = h.Handle
			if hd:FindFirstChild("AccessoryWeld") then
				hd.AccessoryWeld:Destroy()
			end
			table.insert(Network.BaseParts, hd)
		end
	end

	Network.PartOwnership = {Enabled = false}
	Network.PartOwnership.Enable = coroutine.create(function()
		if not Network.PartOwnership.Enabled then
			Network.PartOwnership.Enabled = true
			Network.PartOwnership.Connection = RunService.Heartbeat:Connect(function()
				sethiddenproperty(LocalPlayer,"SimulationRadius",1/0)
				for _,Part in pairs(Network.BaseParts) do
					if Part:IsDescendantOf(workspace) then
						coroutine.wrap(function()
							Part.Velocity = Network.Velocity
						end)()
					end
				end
			end)
			Network.Output.Send(print,"PartOwnership enabled.")
		else
			Network.Output.Send(warn,"PartOwnership already enabled.")
		end
	end)
	
end)

local function ToglePartsManipulation(Enabled)

	PartButton.Frame.Frame.Visible = Enabled
	getgenv().CurrentSXConfig.PartManipulationEnabled = Enabled

	if getgenv().CurrentSXConfig.PartManipulationEnabled then

		coroutine.resume(Network.PartOwnership.Enable)
		
		local DebugPart = Instance.new("Part", workspace)
		local ParamsTbl = {}
		DebugPart.Anchored = true
		DebugPart.Size = Vector3.new(1, 1, 1)
		DebugPart.Shape = Enum.PartType.Ball
		DebugPart.Material = Enum.Material.SmoothPlastic
		DebugPart.Color = Color3.new(1, 0, 0)
		DebugPart.CanQuery = nil
		getgenv().PartManipulationDebug = DebugPart
		ParamsTbl = {DebugPart}
		
		local PLRPos

		task.spawn(function()
			
			while task.wait() do
				
				if not getgenv().CurrentSXConfig.PartManipulationPlayer.Character then continue end
				if not getgenv().CurrentSXConfig.PartManipulationPlayer.Character:FindFirstChild("HumanoidRootPart") then continue end

				PLRPos = getgenv().CurrentSXConfig.PartManipulationPlayer.Character.HumanoidRootPart.Position
				
			end
			
		end)

		local function ManipulatePart(i, v)
			
			v.ChildAdded:Connect(function(vv)

				ManipulatePart(i, vv)

			end)
			
			if v:HasTag("Manipulating") then return end
			if not v:IsA("BasePart") or v:IsA("Terrain") then return end
			if Char:IsAncestorOf(v) then return end
			if v.Anchored then return end

			local IsInAChar
			
			if v.Parent:FindFirstChild("Humanoid") then
				
				for i, vv in v.Parent:GetDescendants() do
					
					if not vv:IsA("BasePart") then continue end
					
					vv.CanCollide = false
					
				end
				
			end
			
			for i,vv in game:GetService("Players"):GetPlayers() do

				if IsInAChar then continue end
				if not vv.Character then continue end

				if vv.Character:IsAncestorOf(v) then

					IsInAChar = true

				end		

			end

			if IsInAChar then return end

			local OrbitAngle = math.random(0, 360)

			v.CanCollide = nil
			v.CanTouch = nil
			v.Massless = true

			table.insert(ParamsTbl, v)

			task.spawn(function()

				v:AddTag("Manipulating")

				while getgenv().CurrentSXConfig.PartManipulationEnabled do

					task.wait()

					if not PLR.Character then continue end
					if not PLR.Character:FindFirstChild("HumanoidRootPart") then continue end
					if Char:IsAncestorOf(v) then return end
					if v.Anchored then continue end

					local Position

					if getgenv().CurrentSXConfig.PartManipulationType == "Mouse" then

						local MP = UIS:GetMouseLocation()
						local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
						--local Params = RaycastParams.new()

						--Params.FilterDescendantsInstances = ParamsTbl
						--Params.FilterType = Enum.RaycastFilterType.Exclude

						--local CamResult = workspace:Raycast(MR.Origin, MR.Direction * getgenv().CurrentSXConfig.PartManipulationDistance, Params)


						--if CamResult then

						--	Position = CamResult.Position

						--else

						Position = MR.Origin + MR.Direction * getgenv().CurrentSXConfig.PartManipulationDistance

						--end

					elseif getgenv().CurrentSXConfig.PartManipulationType == "Orbit" then

						OrbitAngle += 0.1

						local X = PLR.Character.HumanoidRootPart.Position.X + math.cos(OrbitAngle) * getgenv().CurrentSXConfig.PartManipulationDistance
						local Z = PLR.Character.HumanoidRootPart.Position.Z + math.sin(OrbitAngle) * getgenv().CurrentSXConfig.PartManipulationDistance

						Position = Vector3.new(X, PLR.Character.HumanoidRootPart.Position.Y, Z)

					else

						Position = PLRPos

					end

					if not Position then continue end

					v.AssemblyLinearVelocity = (Position - v.Position).Unit * getgenv().CurrentSXConfig.PartManipulationSpeed
					DebugPart.Position = Position

				end

				v.CanCollide = true
				v.CanTouch = true
				v.Massless = false
				v:RemoveTag("Manipulating")

			end)
			
		end

		for i,v in workspace:GetDescendants() do

			ManipulatePart(i, v)
			
			v.ChildAdded:Connect(function(vv)
				
				ManipulatePart(i, vv)
				
			end)
			
		end
		
	else
		
		getgenv().PartManipulationDebug:Destroy()
		
	end

end

print("Ccac")

PartButton.MouseButton1Down:Connect(function()
	ToglePartsManipulation(not getgenv().CurrentSXConfig.PartManipulationEnabled)
end)

PartKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	PartKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.PartManipulationKey = Inp.KeyCode
			PartKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until PartKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

PartSpeedBox.FocusLost:Connect(function(EP)
	
	if not EP then return end

	getgenv().CurrentSXConfig.PartManipulationSpeed = tonumber(PartSpeedBox.Text) or getgenv().CurrentSXConfig.PartManipulationSpeed
	PartSpeedBox.Text = "Speed = " ..getgenv().CurrentSXConfig.PartManipulationSpeed

end)

PartDistanceBox.FocusLost:Connect(function(EP)

	if not EP then return end

	getgenv().CurrentSXConfig.PartManipulationDistance = tonumber(PartDistanceBox.Text) or getgenv().CurrentSXConfig.PartManipulationDistance
	PartDistanceBox.Text = "Distance = " ..getgenv().CurrentSXConfig.PartManipulationDistance

end)

PartPlayerBox.FocusLost:Connect(function(EP)

	if not EP then return end

	local PlayerName = PartPlayerBox.Text
	local PLayer

	for i,v in game:GetService("Players"):GetPlayers() do

		if PLayer then continue end

		if string.find(string.lower(v.DisplayName), string.lower(PlayerName)) then

			PLayer = v
			getgenv().CurrentSXConfig.PartManipulationPlayer = v

		end

	end

	PartPlayerBox.Text = "Player = " ..getgenv().CurrentSXConfig.PartManipulationPlayer.DisplayName

end)

PartPlayerToolButton.MouseButton1Down:Connect(function()

	local Tool = getgenv().CurrentSXConfig.FlingTool:Clone()
	local Highlight = Instance.new("Highlight")

	Tool.Name = "Parts tool"
	Tool.ToolTip = "terrorise nds lobbies"
	Highlight.FillTransparency = 0.5
	Highlight.FillColor = Color3.new(1, 0.580392, 0.0666667)	
	Highlight.OutlineColor = Color3.new(1, 0.580392, 0.0666667)	
	Tool.Parent = PLR.Backpack

	Tool.Activated:Connect(function()

		local MP = UIS:GetMouseLocation()
		local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
		local Result = workspace:Raycast(MR.Origin, MR.Direction * 100000, getgenv().CurrentSXConfig.FlingToolParams)

		if Result then

			if not Result.Instance:GetRootPart() then return end
			if not Result.Instance:GetRootPart().Parent then return end

			local plr = game:GetService("Players"):GetPlayerFromCharacter(Result.Instance:GetRootPart().Parent)

			if not plr then return end

			getgenv().CurrentSXConfig.PartManipulationPlayer = plr
			PartPlayerBox.Text = "Player = " ..getgenv().CurrentSXConfig.PartManipulationPlayer.DisplayName

		end

	end)

	local function FindGuyIg()

		local Found

		if Tool.Parent == PLR.Character then

			local MP = UIS:GetMouseLocation()
			local MR = Cam:ViewportPointToRay(MP.X, MP.Y)
			local Result = workspace:Raycast(MR.Origin, MR.Direction * 100000, getgenv().CurrentSXConfig.FlingToolParams)

			if Result then

				if not Result.Instance:GetRootPart() then return end
				if not Result.Instance:GetRootPart().Parent then return end

				local plr = game:GetService("Players"):GetPlayerFromCharacter(Result.Instance:GetRootPart().Parent)

				if not plr then return end

				Highlight.Parent = plr.Character
				Found = true

			end

		end

		return Found

	end

	while Tool.Parent do

		task.wait()

		local Found = FindGuyIg()

		if not Found then

			Highlight:Remove()

		end

	end

end)

PartMouseButton.MouseButton1Down:Connect(function()
	
	getgenv().CurrentSXConfig.PartManipulationType = "Mouse"
	
	PartMouseButton.Frame.Frame.Visible = true
	PartOrbitButton.Frame.Frame.Visible = false
	PartPlayerButton.Frame.Frame.Visible = false
	
end)

PartOrbitButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.PartManipulationType = "Orbit"

	PartOrbitButton.Frame.Frame.Visible = true
	PartMouseButton.Frame.Frame.Visible = false
	PartPlayerButton.Frame.Frame.Visible = false

end)

PartPlayerButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.PartManipulationType = "Player"

	PartPlayerButton.Frame.Frame.Visible = true
	PartMouseButton.Frame.Frame.Visible = false
	PartOrbitButton.Frame.Frame.Visible = false

end)

-- Other

--ESP

local function ESPEnable(Val)

	getgenv().CurrentSXConfig.ESPEnabled = Val
	ESPEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.ESPEnabled

	if getgenv().CurrentSXConfig.ESPEnabled then

		local Target = FindPlr()

		local function ESP(v : Player)

			if v == PLR then return end

			local Highlight = Instance.new("Highlight", v.Character)
			--local Line = Instance.new("Frame", getgenv().CurrentSXConfig.ESPGui)
			local LineOutline = Instance.new("UIStroke")
			local Line = Drawing.new("Line")
			local Box = Instance.new("Frame", getgenv().CurrentSXConfig.ESPGui)
			--local Box = Drawing.new("Quad")
			local Box3d = Instance.new("Part", workspace)
			local AttLeft = Instance.new("Attachment", Box3d)
			local AttRight = Instance.new("Attachment", Box3d)
			local AttUp = Instance.new("Attachment", Box3d)
			local AttDown = Instance.new("Attachment", Box3d)
			local HealthBillBoard = Instance.new("BillboardGui", getgenv().CurrentSXConfig.ESPGui)
			local HealthBar = Instance.new("CanvasGroup", HealthBillBoard)
			local HealthStroke = Instance.new("UIStroke", HealthBar)
			local HealthCorner = Instance.new("UICorner", HealthBar)
			local HealthBarBar = Instance.new("Frame", HealthBar)
			local HealthText = Instance.new("TextLabel", HealthBar)

			HealthBillBoard.Name = v.Name
			HealthBillBoard.Size = UDim2.fromOffset(10, 100)
			HealthBillBoard.StudsOffsetWorldSpace = Vector3.new(-2, 0, 0)
			HealthBillBoard.AlwaysOnTop = true
			HealthBar.Size = UDim2.fromScale(1, 1)
			HealthBar.BackgroundColor3 = Color3.new(1, 0, 0)
			HealthCorner.CornerRadius = UDim.new(1, 0)
			HealthStroke.Thickness = 3
			HealthBarBar.BackgroundColor3 = Color3.new(0, 1, 0)
			HealthBarBar.AnchorPoint = Vector2.new(0,1)
			HealthBarBar.Position = UDim2.fromScale(0,1)
			HealthBarBar.Size = UDim2.fromScale(1, 0.5)
			HealthText.Size = UDim2.fromScale(1, 1)
			HealthText.BackgroundTransparency = 1
			HealthText.ZIndex = 2
			HealthText.Font = Enum.Font.FredokaOne
			HealthText.TextScaled = true
			HealthText.Text = "50/100"
			Box3d.Anchored = true
			Box3d.CanCollide = nil
			Box3d.Transparency = 1
			--Box.BackgroundTransparency = 1
			--Box.AnchorPoint = Vector2.new(0.5,0.25)
			Line.Size = UDim2.new(0,0,0,0)
			Line.AnchorPoint = Vector2.new(0.5,0.5)
			LineOutline.Color = Color3.new(1,1,1)
			Highlight.FillTransparency = 1

			local function WorldToScreen(Pos) --This function gets a World Position (Pos) and returns a Vector2 value of the screen coordinates
				local M = PLR:GetMouse()

				local point = Cam.CoordinateFrame:pointToObjectSpace(Pos)
				local aspectRatio = M.ViewSizeX / M.ViewSizeY
				local hfactor = math.tan(math.rad(Cam.FieldOfView) / 2)
				local wfactor = aspectRatio*hfactor

				local x = (point.x/point.z) / -wfactor
				local y = (point.y/point.z) /  hfactor

				return Vector2.new(M.ViewSizeX * (0.5 + 0.5 * x), M.ViewSizeY * (0.5 + 0.5 * y))
			end

			task.spawn(function()

				local UI = Instance.new("TextLabel")

				while getgenv().CurrentSXConfig.ESPEnabled and v.Parent == game:GetService("Players") do

					task.wait()

					if getgenv().CurrentSXConfig.ESPOutlineType ~= "Highlight" then

						Highlight.Enabled = nil

					else

						Highlight.Enabled = true

					end

					if getgenv().CurrentSXConfig.ESPOutlineType ~= "Box" then

						Box.Visible = false

					else

						Box.Visible = true

					end

					if getgenv().CurrentSXConfig.ESPLinesEnabled then

						Line.Visible = true

					else

						Line.Visible = false

					end

					if v.Character then

						local Pos, IsOnScreen = Cam:WorldToScreenPoint(v.Character:GetPivot().Position)
						local Size
						local Char3DSize = v.Character:GetExtentsSize()
						
						HealthBillBoard.Adornee = v.Character
						
						if v.Character:FindFirstChild("Humanoid") then
							
							HealthBarBar.Size = UDim2.fromScale(1, v.Character.Humanoid.Health / v.Character.Humanoid.MaxHealth)
							HealthText.Text = string.gsub(math.round(v.Character.Humanoid.Health).. "/" ..math.round(v.Character.Humanoid.MaxHealth), ".", "%1\n")
							
						end
						
						Box3d.CFrame = v.Character:GetPivot()
						Box3d.Size = Char3DSize

						AttLeft.Position = Vector3.new(-Char3DSize.X / 2,0,0)
						AttRight.Position = Vector3.new(Char3DSize.X / 2,0,0)
						AttUp.Position = Vector3.new(0,Char3DSize.Y / 2,0)
						AttDown.Position = Vector3.new(0,-Char3DSize.Y / 2,0)

						local PosLeft = WorldToScreen(AttLeft.WorldPosition)
						local PosRight = WorldToScreen(AttRight.WorldPosition)
						local PosUp = WorldToScreen(AttUp.WorldPosition)
						local PosDown = WorldToScreen(AttDown.WorldPosition)
						local _, DownOnScreen = Cam:WorldToScreenPoint(AttDown.WorldPosition)

						local UdimAndNotVectorThingie = UDim2.fromOffset(PosDown.X, PosDown.Y)
						local viewportSize = Cam.ViewportSize

						--[[Line.Position = UDim2.fromOffset(UIS:GetMouseLocation().X, UIS:GetMouseLocation().Y):Lerp(UDim2.fromOffset(PosDown.X, PosDown.Y), 0.5)
						--Line.Position = UDim2.fromOffset(
						--	Line.Position.X.Scale * viewportSize.X,
						--	Line.Position.Y.Scale * viewportSize.Y
						--)
						Line.Size = UDim2.new(0, 0, 0, (Vector2.new(Line.Position.X.Offset,Line.Position.Y.Offset) - PosDown).Magnitude * 2)

						local Diff = UdimAndNotVectorThingie - Line.Position

						Line.Rotation = math.deg(math.atan2(Diff.Y.Offset, Diff.X.Offset)) - 90]]

						Line.From = Vector2.new(UIS:GetMouseLocation().X, UIS:GetMouseLocation().Y)
						Line.To = Vector2.new(PosDown.X, PosDown.Y)

						--Box.PointA = Vector2.new(PosLeft.X, PosUp.Y)
						--Box.PointB = Vector2.new(PosRight.X, PosUp.Y)
						--Box.PointC = Vector2.new(PosRight.X, PosDown.Y)
						--Box.PointD = Vector2.new(PosLeft.X, PosDown.Y)

						if not DownOnScreen then Line.Visible = false end
						if not IsOnScreen then Box.Visible = false end

						local Size = UDim2.new(0, (PosLeft - PosRight).Magnitude, 0, (PosUp - PosDown).Magnitude * 2)

						if Target == v and getgenv().CurrentSXConfig.ESPColorEnabled then

							Line.Color = getgenv().CurrentSXConfig.ESPColor
							--Box.Color = getgenv().CurrentSXConfig.ESPColor
							HealthStroke.Color = getgenv().CurrentSXConfig.ESPColor
							
						elseif not getgenv().CurrentSXConfig.ESPTeamColor or not v.Team then

							Line.Color = getgenv().CurrentSXConfig.NotTargettedESPColor
							--Box.Color = getgenv().CurrentSXConfig.NotTargettedESPColor
							HealthStroke.Color = getgenv().CurrentSXConfig.NotTargettedESPColor

						end

						if getgenv().CurrentSXConfig.ESPColorEnabled then

							if Target == v then

								Highlight.OutlineColor = getgenv().CurrentSXConfig.ESPColor
								UI.TextColor3 = getgenv().CurrentSXConfig.ESPColor

							else

								Highlight.OutlineColor = getgenv().CurrentSXConfig.NotTargettedESPColor
								UI.TextColor3 = getgenv().CurrentSXConfig.NotTargettedESPColor

							end

						else

							Highlight.OutlineColor = getgenv().CurrentSXConfig.NotTargettedESPColor
							UI.TextColor3 = getgenv().CurrentSXConfig.NotTargettedESPColor

						end

						HealthBillBoard.Enabled = getgenv().CurrentSXConfig.ESPLifeEnabled

						if getgenv().CurrentSXConfig.ESPTeamColor and v.Team and v ~= Target then

							local Color = v.TeamColor.Color

							Highlight.OutlineColor = Color
							UI.TextColor3 = Color
							Line.Color = Color
							--Box.Color = Color

						end

						if v.Character:FindFirstChild("HumanoidRootPart") then

							--Box.Size = Size
							--Box.Position = UDim2.fromOffset(WorldToScreen(v.Character.HumanoidRootPart.Position).X, WorldToScreen(v.Character.HumanoidRootPart.Position).Y)							

						end

						pcall(function()

							Highlight.Parent = v.Character

						end)

					else

						Box.Visible = false
						Line.Visible = false

					end

					if getgenv().CurrentSXConfig.ESPNameEnabled and v.Character then

						if not v.Character:FindFirstChild("Head") then UI:Remove() continue end

						local Pos, IsOnScreen = Cam.WorldToScreenPoint(Cam, v.Character.Head.Position)
						local Vec2Pos = WorldToScreen(v.Character.Head.Position)

						if not IsOnScreen then UI:Remove() continue end
						if not getgenv().CurrentSXConfig.ESPEnabled then continue end

						UI.Parent = getgenv().CurrentSXConfig.ESPGui
						UI.AnchorPoint = Vector2.new(0.5,0)
						UI.Size = UDim2.new(0.061, 0,0.028, 0)
						UI.TextScaled = true
						UI.BackgroundTransparency = 1
						UI.Text = v.DisplayName
						UI.Font = Enum.Font.FredokaOne
						UI.Position = UDim2.fromOffset(Vec2Pos.X, Vec2Pos.Y)

					else

						if not getgenv().CurrentSXConfig.ESPEnabled then continue end

						UI.Parent = nil

					end

				end

			end)

			local OnRespawn = v.CharacterAdded:Connect(function()

				Highlight:Destroy()
				Highlight = Instance.new("Highlight", v.Character)
				Highlight.FillTransparency = 1

			end)

			task.spawn(function()

				while getgenv().CurrentSXConfig.ESPEnabled do

					task.wait()

				end

				Highlight:Destroy()
				Line:Destroy()
				Box:Destroy()
				Box3d:Destroy()
				HealthBillBoard:Destroy()
				OnRespawn:Disconnect()

			end)

		end

		for i,v in game:GetService("Players"):GetPlayers() do

			ESP(v)

		end

		game:GetService("Players").PlayerAdded:Connect(ESP)

		while getgenv().CurrentSXConfig.ESPEnabled do

			task.wait()

			Target = FindPlr()

		end

	else

		getgenv().CurrentSXConfig.ESPGui:ClearAllChildren()

	end

end

local function ESPRainbowEnable(Val)

	NotTargetedESPColorBox.Visible = getgenv().CurrentSXConfig.ESPRainbowEnabled
	ESPTeamColorButton.Visible = getgenv().CurrentSXConfig.ESPRainbowEnabled
	getgenv().CurrentSXConfig.ESPRainbowEnabled = Val
	ESPRainbowButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.ESPRainbowEnabled

	print(Val)

	if getgenv().CurrentSXConfig.ESPRainbowEnabled then

		local RainbowVal = Instance.new("Color3Value")
		local ColorTbl = {
			BrickColor.Red().Color,
			BrickColor.Yellow().Color,
			BrickColor.Blue().Color,
			Color3.new(1,0,1),
			Color3.new(0.5,0,1)
		}

		task.spawn(function()

			while getgenv().CurrentSXConfig.ESPRainbowEnabled do

				task.wait()

				getgenv().CurrentSXConfig.NotTargettedESPColor = RainbowVal.Value

			end

		end)

		while getgenv().CurrentSXConfig.ESPRainbowEnabled do

			task.wait()

			for i,v in ColorTbl do

				local TWER = TW:Create(RainbowVal, TweenInfo.new(1, Enum.EasingStyle.Linear), {Value = v})

				TWER:Play()
				TWER.Completed:Wait()

			end

		end

	else

		getgenv().CurrentSXConfig.NotTargettedESPColor = getgenv().CurrentSXConfig.NoEffectESPColor

		while not getgenv().CurrentSXConfig.ESPRainbowEnabled do

			task.wait()

			getgenv().CurrentSXConfig.NotTargettedESPColor = getgenv().CurrentSXConfig.NoEffectESPColor

		end

	end

end

task.spawn(function()

	task.spawn(function()

		ESPEnable(getgenv().CurrentSXConfig.ESPEnabled)

	end)
	ESPRainbowEnable(getgenv().CurrentSXConfig.ESPRainbowEnabled)

end)

ESPLifeButton.MouseButton1Down:Connect(function()
	
	getgenv().CurrentSXConfig.ESPLifeEnabled = not getgenv().CurrentSXConfig.ESPLifeEnabled
	ESPLifeButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.ESPLifeEnabled
	
end)

ESPKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	ESPKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.ESPKey = Inp.KeyCode
			ESPKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until ESPKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

ESPEnabledButton.MouseButton1Down:Connect(function()

	ESPEnable(not getgenv().CurrentSXConfig.ESPEnabled)

end)

ESPRainbowButton.MouseButton1Down:Connect(function()

	ESPRainbowEnable(not getgenv().CurrentSXConfig.ESPRainbowEnabled)

end)

ESPTeamColorButton.MouseButton1Down:Connect(function()

	ESPRainbowButton.Visible = getgenv().CurrentSXConfig.ESPTeamColor
	getgenv().CurrentSXConfig.ESPTeamColor = not getgenv().CurrentSXConfig.ESPTeamColor
	ESPTeamColorButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.ESPTeamColor

end)

ESPNameEnabledButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.ESPNameEnabled = not getgenv().CurrentSXConfig.ESPNameEnabled
	ESPNameEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.ESPNameEnabled

end)

ESPColorEnabledButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.ESPColorEnabled = not getgenv().CurrentSXConfig.ESPColorEnabled
	ESPColorEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.ESPColorEnabled
	ESPColorBox.Visible = getgenv().CurrentSXConfig.ESPColorEnabled

end)

ESPColorBox.FocusLost:Connect(function(EP)

	if not EP then return end

	local Colors = string.split(ESPColorBox.Text, ",")

	if not tonumber(Colors[1]) or not tonumber(Colors[2]) or not tonumber(Colors[3]) then

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Error",
			Text = "Invalid color"
		})

		return

	end

	local R = tonumber(Colors[1])
	local G = tonumber(Colors[2])
	local B = tonumber(Colors[3])

	getgenv().CurrentSXConfig.ESPColor = Color3.fromRGB(R,G,B)
	ESPColorBox.Text = "Color = " ..tostring(R).. "," ..tostring(G).. "," ..tostring(B)

end)

Tralalelotralala = Instance.new("Frame", TabsFrame)
Tralalelotralala.Visible = nil
Tralalelotralala.Name = "AdvancedESP"

ESPAdvancedButton.MouseButton1Down:Connect(function()

	if CurrentTab == "AdvancedESP" then return end

	TabsFrame[CurrentTab].BackgroundColor3 = Color3.fromRGB(70,70,70)

	for i,v in Tabs[CurrentTab] do

		v.Visible = nil

	end

	for i,v in Tabs["AdvancedESP"] do

		v.Visible = true

	end

	CurrentTab = "AdvancedESP"

end)

ESPOutlineTypeButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.ESPTypeNum += 1

	if getgenv().CurrentSXConfig.ESPTypeNum > #getgenv().CurrentSXConfig.ESPOutlineTypes then

		getgenv().CurrentSXConfig.ESPTypeNum = 1

	end

	getgenv().CurrentSXConfig.ESPOutlineType = getgenv().CurrentSXConfig.ESPOutlineTypes[getgenv().CurrentSXConfig.ESPTypeNum]

	ESPOutlineTypeButton.TextLabel.Text = "Outline type = " ..getgenv().CurrentSXConfig.ESPOutlineType

end)

ESPLinesButton.MouseButton1Down:Connect(function()

	getgenv().CurrentSXConfig.ESPLinesEnabled = not getgenv().CurrentSXConfig.ESPLinesEnabled
	ESPLinesButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.ESPLinesEnabled

end)

NotTargetedESPColorBox.FocusLost:Connect(function(EP)

	if not EP then return end

	local Colors = string.split(NotTargetedESPColorBox.Text, ",")

	if not tonumber(Colors[1]) or not tonumber(Colors[2]) or not tonumber(Colors[3]) then

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Error",
			Text = "Invalid color"
		})

		return

	end

	local R = tonumber(Colors[1])
	local G = tonumber(Colors[2])
	local B = tonumber(Colors[3])

	if not getgenv().CurrentSXConfig.ESPRainbowEnabled then

		getgenv().CurrentSXConfig.NotTargettedESPColor = Color3.fromRGB(R,G,B)

	end

	getgenv().CurrentSXConfig.NoEffectESPColor = Color3.fromRGB(R,G,B)
	NotTargetedESPColorBox.Text = "Color = " ..tostring(R).. "," ..tostring(G).. "," ..tostring(B)

end)

--Bang

local function BangEnable()

	getgenv().CurrentSXConfig.BangEnabled = not getgenv().CurrentSXConfig.BangEnabled
	BangEnabledButton.Frame.Frame.Visible = getgenv().CurrentSXConfig.BangEnabled

	if getgenv().CurrentSXConfig.BangEnabled then

		if not Char or Char.Humanoid.Health <= 0 then getgenv().CurrentSXConfig.BangEnabled = nil return end
		if PLR == PlayerToBang then

			game:GetService("StarterGui"):SetCore("SendNotification", {
				Title = "Error",
				Text = "Tried to bang yourself please choose a valid player"
			})
			return
		end

		local Anim = Instance.new("Animation")

		if Char:FindFirstChild("LowerTorso") then

			Anim.AnimationId = "rbxassetid://5918726674"

		else

			Anim.AnimationId = "rbxassetid://148840371"

		end

		local Track = PLR.Character.Humanoid:LoadAnimation(Anim)

		Track:Play()

		while getgenv().CurrentSXConfig.BangEnabled do

			task.wait()

			if not Char then continue end
			if not Char:FindFirstChild("HumanoidRootPart") then continue end
			if not PlayerToBang.Character then continue end

			if not PlayerToBang.Character:FindFirstChild("HumanoidRootPart") then

				Track:Stop()

				continue

			elseif Char.Humanoid.Health <= 0 then

				continue

			elseif not Track.IsPlaying and getgenv().CurrentSXConfig.BangEnabled then

				Track:Play()

			end

			local Pos

			if BangType == "Back" then

				Pos = PlayerToBang.Character:GetPivot() * CFrame.new(0,0,Char.HumanoidRootPart.Size.Z)

			elseif BangType == "Front" then

				Pos = PlayerToBang.Character:GetPivot() * CFrame.new(Vector3.new(0,0,-Char.HumanoidRootPart.Size.Z), Vector3.new(0,0,180))

			else

				Pos = PlayerToBang.Character.Head.CFrame * CFrame.new(Vector3.new(0,0,-Char.HumanoidRootPart.Size.Z), Vector3.new(0,0,180))

			end 

			Char:PivotTo(Pos)

		end

		Track:Stop()

	end

end

game:GetService("Players").PlayerRemoving:Connect(function(plr)

	if plr == PlayerToBang then

		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "Spheral-X",
			Text = "The targeted player of your bang (" ..PlayerToBang.DisplayName.. ") has left changed target to you."
		})

		getgenv().CurrentSXConfig.BangEnabled = nil
		BangEnabledButton.Frame.Frame = getgenv().CurrentSXConfig.BangEnabled
		PlayerToBang = game:GetService("Players"):GetPlayers()[1]
		BangPlayerBox.Text = "Player = " ..PlayerToBang.DisplayName

	end

end)


BangEnabledButton.MouseButton1Down:Connect(BangEnable)

BangKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	BangKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.BangKey = Inp.KeyCode
			BangKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until BangKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

BangPlayerBox.FocusLost:Connect(function(EP)

	if not EP then return end

	local PlayerName = BangPlayerBox.Text
	local PLayer

	for i,v in game:GetService("Players"):GetPlayers() do

		if PLayer then continue end

		if string.find(string.lower(v.DisplayName), string.lower(PlayerName)) then

			PLayer = v
			PlayerToBang = v

		end

	end

	BangPlayerBox.Text = "Player = " ..PlayerToBang.DisplayName

end)

BTypeButton.MouseButton1Down:Connect(function(PosX, PosY)

	BTypeFrame.Position = UDim2.new(0,PosX,0,PosY)
	BTypeFrame.Visible = true

end)

Back.MouseButton1Down:Connect(function()

	BTypeFrame.Visible = nil
	BangType = "Back"
	BTypeButton.TextLabel.Text = "Type = Back"

end)

Front.MouseButton1Down:Connect(function()

	BTypeFrame.Visible = nil
	BangType = "Front"
	BTypeButton.TextLabel.Text = "Type = Front"

end)

Mouth.MouseButton1Down:Connect(function()

	BTypeFrame.Visible = nil
	BangType = "Mouth"
	BTypeButton.TextLabel.Text = "Type = Mouth"

end)

--Chat

Talk = function(message)

	if game:GetService('TextChatService').ChatVersion == Enum.ChatVersion.LegacyChatService then

		game:GetService('ReplicatedStorage'):WaitForChild('DefaultChatSystemChatEvents'):WaitForChild('SayMessageRequest'):FireServer(message, 'All')

	else

		game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync(message)

	end

end

--Rizz talk

local function RTEnable()

	Talk(getgenv().CurrentSXConfig.RTMessages[math.random(1, #getgenv().CurrentSXConfig.RTMessages)])

end

RTEnabledButton.MouseButton1Down:Connect(RTEnable)

RTKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	RTKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.RTKey = Inp.KeyCode
			RTKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until RTKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

--Trash talk

local function TTEnable()

	Talk(getgenv().CurrentSXConfig.TTMessages[math.random(1, #getgenv().CurrentSXConfig.TTMessages)])

end

TTEnabledButton.MouseButton1Down:Connect(TTEnable)

TTKeybindButton.MouseButton1Down:Connect(function()

	if BindingKey then return end

	BindingKey = true
	TTKeybindButton.TextLabel.Text = "..."

	local Connection = UIS.InputBegan:Connect(function(Inp, GPE)

		if GPE then return end

		if Inp.UserInputType == Enum.UserInputType.Keyboard then

			getgenv().CurrentSXConfig.TTKey = Inp.KeyCode
			TTKeybindButton.TextLabel.Text = "Keybind = " ..string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), -1)

		end


	end)

	repeat wait() until TTKeybindButton.TextLabel.Text ~= "..."

	Connection:Disconnect()
	BindingKey = nil

end)

--Chat Art

for i,v in getgenv().CurrentSXConfig.ChatArtColorsToText do

	local Button = Instance.new("TextButton", ChatArtButtonsFrame)
	local Corner = Instance.new("UICorner", Button)
	local Ratio = Instance.new("UIAspectRatioConstraint", Button)

	Button.Text = ""
	Button.Name = tostring(i)
	Button.BackgroundColor3 = i
	Button.Size = UDim2.fromScale(0.5, 0.5)

	Corner.CornerRadius = UDim.new(1, 0)

	Button.MouseButton1Down:Connect(function()

		ChatArtColor = i

	end)

end

for i = 1, 49 do

	local Button = Instance.new("TextButton", ChatArtEditFrame)
	local Corner = Instance.new("UICorner", Button)

	Button.Text = ""
	Button.Name = i
	Button.LayoutOrder = i
	Button.BackgroundColor3 = Color3.new(1,1,1)

	Corner.CornerRadius = UDim.new(1, 0)

	Button.MouseButton1Down:Connect(function()

		if Button.BackgroundColor3 == ChatArtColor then

			Button.BackgroundColor3 = Color3.new(1,1,1) 

		else

			Button.BackgroundColor3 = ChatArtColor

		end

	end)

end

ChatArtButton.MouseButton1Down:Connect(function()

	ChatArtFrame.Size = UDim2.new(0.5,0,0,0)
	ChatArtFrame.ExitButton.Visible = nil
	ChatArtFrame.Visible = true
	MenuFrame.Visible = nil
	--ChatArtRatio:Remove()

	local TWCAF = TW:Create(ChatArtFrame, TweenInfo.new(0.5), {Size = UDim2.new(0.5,0,0.5,0)})
	TWCAF:Play()
	TWCAF.Completed:Wait()

	--ChatArtRatio.Parent = ChatArtFrame
	ChatArtFrame.ExitButton.Visible = true

end)

ChatArtFrame.ExitButton.MouseButton1Down:Connect(function()

	--ChatArtRatio:Remove()

	local TWCAF = TW:Create(ChatArtFrame, TweenInfo.new(0.5), {Size = UDim2.new(0.5,0,0,0)})
	TWCAF:Play()
	TWCAF.Completed:Wait()

	--ChatArtRatio.Parent = ChatArtFrame
	ChatArtFrame.Visible = nil
	MenuFrame.Visible = true

end)

ChatArtSendButton.MouseButton1Down:Connect(function()

	local Msg = ""
	local ThingIg = 0

	for i,v in ChatArtEditFrame:GetChildren() do

		if not v:IsA("TextButton") then continue end

		local Key = Color3.new(v.BackgroundColor3.R, v.BackgroundColor3.G, v.BackgroundColor3.B)

		ThingIg += 1
		Msg = Msg.. getgenv().CurrentSXConfig.ChatArtColorsToTextFrThisTime[tostring(Key)]

		if ThingIg == 7 then

			Talk(Msg)

			Msg = ""
			ThingIg = 0
			task.wait(0.5)

		end

	end

end)

-- Jack off

JTool.MouseButton1Down:Connect(function()
	
	loadstring(game:HttpGet("https://pastebin.com/raw/1h6tD9Fv"))()
	
end)

WateverIsThisMadness.MouseButton1Down:Connect(function()
	
	loadstring(game:HttpGet("https://pastefy.app/rmdi1m55/raw"))()
	
end)

--Emotes

EmotesFolder = Instance.new("Folder")
EmotesFolder.Name = "GHAnims"

--for i,v in Emotes do

--	local Button = NewButton(i, EmotesFrame, i, #EmotesFrame:GetChildren(), true)
--	local EmoteTweens = {}
	
--	for ii,vv in v do
		
--		EmoteTweens[ii] = {}
		
--		for iii, vvv in vv do

--			if iii == "Time" then continue end

--			local TW = TW:Create(PLR.Character.Torso[iii], TweenInfo.new(vv["Time"]), {["C1"] = vvv})

--			table.insert(EmoteTweens[ii], TW)

--		end

--	end

--	Button.MouseButton1Down:Connect(function()
	
--		for ii,vv in EmoteTweens do
			
--			for iii, vvv in vv do
				
--				vvv:Play()
				
--				if iii == #vv then vvv.Completed:Wait() end
				
--			end
			
--		end

--	end)

--end

Loaded += 1

TWL:Cancel()
TWL = TW:Create(LoadingBar, TweenInfo.new(0.25), {Size = UDim2.new(Loaded / TotalToLoad,0,1,0)})
TWL:Play()
TWL.Completed:Wait()

--Inputs

UIS.InputBegan:Connect(function(Inp, GPE)

	if BindingKey then return end

	if Inp.KeyCode == Key then

		MenuUI.Enabled = not MenuUI.Enabled

		if not MenuUI.Enabled then

			UIS.MouseBehavior = MouseBehavior
			UIS.MouseIconEnabled = MouseVisible

		end

	end

	if not KeybindsActive and not table.find(getgenv().CurrentSXConfig.KeybindsWhitelist, string.sub(tostring(Inp.KeyCode), #tostring(Inp.KeyCode), #tostring(Inp.KeyCode))) then return end

	if Inp.KeyCode == getgenv().CurrentSXConfig.FlyKey and FlyKeybindButton.Visible then

		FlyActivate()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.InfJumpKey and InfJumpKeybindButton.Visible then

		InfJumpEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.SpeedKey and SpeedKeybindButton.Visible and Ver ~= "Safe" then

		SpeedActivate()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.PartManipulationKey and PartKeybindButton.Visible then

		ToglePartsManipulation(not getgenv().CurrentSXConfig.PartManipulationEnabled)

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.ESPKey and ESPKeybindButton.Visible then

		ESPEnable(not getgenv().CurrentSXConfig.ESPEnabled)

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.CTPKey and CTPKeybindButton.Visible then

		CTPEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.BangKey and BangKeybindButton.Visible then

		BangEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.PTPKey and PTPKeybindButton.Visible then

		PTPEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.RTKey and RTKeybindButton.Visible then

		RTEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.TTKey and TTKeybindButton.Visible then

		TTEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.CLockKey and CLockKeybindButton.Visible then

		CLockEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.AimbotKey and AimbotKeybindButton.Visible and not TriggerbotEnabled then

		AimbotEnable()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.FlingKey and FlingKeybindButton.Visible then

		Fling()

	elseif Inp.KeyCode == getgenv().CurrentSXConfig.TriggerbotKeybind and TriggerbotKeybindButton.Visible then

		TriggerbotEnable()

	end

end)

-- Fixing the death problem

PLR.CharacterAdded:Connect(function(char)

	Char = char

end)

OldMouse = UIS.MouseBehavior
UIS.MouseBehavior = Enum.MouseBehavior.Default

game:GetService("StarterGui"):SetCore("SendNotification", {
	Title = "Spheral-X",
	Text = "Done"
})

local TWLF = TW:Create(LoadingBar, TweenInfo.new(0.5), {BackgroundTransparency = 1})
local TWMF = TW:Create(MenuFrame, TweenInfo.new(0.5), {BackgroundTransparency = 0})

LoadingFrame.BackgroundTransparency = 1
TWLF:Play()
TWLF.Completed:Wait()
NameLabelStroke.Enabled = true
LoadingFrame:Destroy()
NameLabel.Text = "Spheral-X 2.1"
TWMF:Play()
TWMF.Completed:Wait()

TabsFrame.Visible = true
CurrentTab = "Home"

for i,v in Tabs[CurrentTab] do

	v.Visible = true

end

while task.wait() do

	if not getgenv().CurrentSXConfig.FlingToolParams then continue end

	getgenv().CurrentSXConfig.FlingToolParams.FilterDescendantsInstances = getgenv().CurrentSXConfig.FlingToolParamsWhitelist

	if MenuDragged then

		RightSizeFrame.Position = UDim2.fromScale(MenuFrame.Position.X.Scale + (MenuFrame.Size.X.Scale / 2), 0.5)
		LeftSizeFrame.Position = UDim2.fromScale(MenuFrame.Position.X.Scale - (MenuFrame.Size.X.Scale / 2), 0.5)
		UpSizeFrame.Position = UDim2.fromScale(0.5, MenuFrame.Position.Y.Scale - (MenuFrame.Size.Y.Scale / 2))
		DownSizeFrame.Position = UDim2.fromScale(0.5, MenuFrame.Position.Y.Scale + (MenuFrame.Size.Y.Scale / 2))

	else

		local NewSize = UDim2.fromScale(RightSizeFrame.Position.X.Scale - LeftSizeFrame.Position.X.Scale, DownSizeFrame.Position.Y.Scale - UpSizeFrame.Position.Y.Scale)
		local NewPosX = LeftSizeFrame.Position:Lerp(RightSizeFrame.Position, 0.5)
		local NewPosY = DownSizeFrame.Position:Lerp(UpSizeFrame.Position, 0.5)
		local NewPos = UDim2.fromScale(NewPosX.X.Scale, NewPosY.Y.Scale)

		MenuFrame.Position = NewPos
		MenuFrame.Size = NewSize

	end

	if Ver == "Safe" then

		AlwaysEnabled.Parent = game:GetService("CoreGui").CaptureOverlay

	else

		AlwaysEnabled.Parent = game:GetService("CoreGui")

	end

	if CurrentTab ~= "Home" then

		WhitelistFrame.Visible = nil

	end

	if CurrentTab ~= "Fling" then

		FlingWhitelistFrame.Visible = nil

	end

	if getgenv().CurrentSXConfig.CLockFovEnabled then

		local MP = UIS:GetMouseLocation()

		FovFrame.AnchorPoint = Vector2.new(0.5,0.5)
		FovFrame.Position = UDim2.new(0, MP.X, 0, MP.Y - 50)
		FovFrame.Size = UDim2.new(0, FovSize * 1.75, 0, FovSize * 1.75)
		FovFrame.Visible = getgenv().CurrentSXConfig.FovVisible

	else

		FovFrame.Visible = nil

	end

	if MenuUI.Enabled then

		UIS.MouseBehavior = Enum.MouseBehavior.Default
		UIS.MouseIconEnabled = true
		Cursor.Visible = CustomCursor
		Cursor.Position = UDim2.fromOffset(UIS:GetMouseLocation().X, UIS:GetMouseLocation().Y)

	end

end
